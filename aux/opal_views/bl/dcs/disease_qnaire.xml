<org.obiba.magma.views.View>
  <name>QC_BL_disease_qnaire</name>
  <from class="org.obiba.magma.views.JoinTable">
    <list>
      <table inner="false" class="org.obiba.magma.support.ValueTableReference">
        <reference>clsa-dcs.Participants</reference>
      </table>
      <table inner="false" class="org.obiba.magma.support.ValueTableReference">
        <reference>clsa-dcs.DiseaseSymptoms</reference>
      </table>
    </list>
  </from>
  <select class="org.obiba.magma.views.support.NoneClause"/>
  <where class="org.obiba.magma.views.support.AllClause"/>
  <variables class="org.obiba.magma.js.views.VariablesClause">
    <variables class="linked-hash-set">
      <variable name="technician" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">$(&apos;clsa-dcs.DiseaseSymptoms:QuestionnaireRun.user&apos;).whenNull(
  $group(&apos;Admin.Action.stage&apos;,&apos;DiseaseSymptoms&apos;,&apos;Admin.Action.user&apos;).asSequence().last()).lowerCase()</attribute>
        </attributes>
      </variable>
      <variable name="skip" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">var stage = &apos;DiseaseSymptoms&apos;
var action = $group(&apos;Admin.Action.stage&apos;,stage,&apos;Admin.Action.actionType&apos;).asSequence()
var res = $group(&apos;Admin.Action.stage&apos;,stage,&apos;Admin.Action.eventReason&apos;).asSequence().filter(function(v,i){
  return i == action.indexOf(&apos;SKIP&apos;)
  }).last()
if(res.isNull().not().value()) {
  res = newValue(res.value().slice(14),&apos;text&apos;)  
}
res</attribute>
        </attributes>
      </variable>
      <variable name="contraindicated" valueType="boolean" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">$group(&apos;clsa-dcs.Participants:Admin.StageInstance.stage&apos;,&apos;DiseaseSymptoms&apos;,
&apos;Admin.StageInstance.lastState&apos;).any(&apos;Contraindicated&apos;,&apos;NotApplicable&apos;)</attribute>
        </attributes>
      </variable>
      <variable name="comment" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">// this script compounds repeated comments by using lowercase comment strings as array keys
//
var stage = &apos;DiseaseSymptoms&apos;
var c_seq = $group(&apos;Admin.Action.stage&apos;,stage,&apos;Admin.Action.comment&apos;).asSequence()
var e_seq = $group(&apos;Admin.Action.stage&apos;,stage,&apos;Admin.Action.eventReason&apos;).asSequence()
var res = null
if(c_seq.size().eq(e_seq.size()).value())
{
  var c_str = []  // string array of comments
  var e_str = []  // string array of event reasons

  for(var i = 0; i &lt; c_seq.size(); i++) {
    var c = c_seq.valueAt(i).value()
    if(null == c) continue
    c = c.replace(/[^a-zA-Z0-9 àâäèéêëîïôœùûüÿçÀÂÄÈÉÊËÎÏÔŒÙÛÜŸÇ]/g,&quot;&quot;)
    var e = e_seq.valueAt(i).value()
    if(0 &lt; c.length) {
      c_str.push(c)
      if(null != e &amp;&amp; 0 &lt; e.length) {
        e = e.slice(14)
      } else {
        e = &apos;SeeComment&apos;
      }
      e_str.push(e)
    }
  }

  if(0 &lt; c_str.length) {
    var arr = []  // array of event reasons
    var key_orig = []  // array of lower cased comments as unique keys
    for(var i = 0; i &lt; c_str.length; i++) {
      var key = c_str[i]
      var key_lower = key.toLowerCase()
      // retain the first encountered instance of the comment
      //
      if(undefined === key_orig[key_lower])
        key_orig[key_lower] = key

      if(undefined === arr[e_str[i]])
        arr[e_str[i]] = []

      if(-1===arr[e_str[i]].indexOf(key_orig[key_lower]))
        arr[e_str[i]].push(key_orig[key_lower])
    }

    // loop over the final array of event reasons and their sets of comments
    //
    var str = &apos;{&apos;
    for(var key in arr) {
      str += &apos;&quot;&apos; + key + &apos;&quot;:[&apos;
      var t = []
      for(var i = 0; i &lt; arr[key].length; i++) {
        t.push(&apos;&quot;&apos; + arr[key][i] + &apos;&quot;&apos;)
      }
      str += t.join(&apos;,&apos;) + &apos;],&apos;
    }

    res = newValue(str.substring(0,str.length-1)+&apos;}&apos;,&apos;text&apos;)
  }
}
res</attribute>
        </attributes>
      </variable>
      <variable name="qnaire_complete" valueType="decimal" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">var stage = &apos;DiseaseSymptoms&apos;
var p = $(&apos;clsa-dcs.&apos; + stage + &apos;:QuestionnaireMetric.missingCount&apos;).asSequence()
var q = $(&apos;clsa-dcs.&apos; + stage + &apos;:QuestionnaireMetric.questionCount&apos;).asSequence()
var res = null
if(p.isNull().or(q.isNull(),q.sum().eq(0)).not().value()) {
  res = q.sum().minus(p.sum()).multiply(100).div(q.sum())
}
res</attribute>
        </attributes>
      </variable>
      <variable name="missing" valueType="boolean" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">$this(&apos;contraindicated&apos;).not().and(
  $this(&apos;skip&apos;).isNull(),
  $this(&apos;qnaire_complete&apos;).isNull(),
  $this(&apos;duration&apos;).isNull())</attribute>
        </attributes>
      </variable>
      <variable name="duration_name" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0" repeatable="true" occurrenceGroup="">
        <attributes>
          <attribute name="script" valueType="text">newSequence([&apos;CAO&apos;,&apos;CCC_CANCER&apos;,&apos;CCC_CARDIAC&apos;,&apos;CCC_GASTRO&apos;,&apos;CCC_INFECTION&apos;,&apos;CCC_MENTAL&apos;,&apos;CCC_NEURO&apos;,&apos;CCC_OTHER&apos;,&apos;CCC_VISION&apos;,&apos;DEP&apos;,&apos;DIA&apos;,&apos;DPR&apos;,&apos;HBP&apos;,&apos;HYP&apos;,&apos;IHD&apos;,&apos;OAR&apos;,&apos;OSA&apos;,&apos;OSH&apos;,&apos;OSK&apos;,&apos;OST&apos;,&apos;PKD&apos;,&apos;ROS&apos;,&apos;STR&apos;,&apos;TBI&apos;],&apos;text&apos;)</attribute>
        </attributes>
      </variable>
      <variable name="duration" valueType="integer" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">var stage = &apos;DiseaseSymptoms&apos;
var res = null
var post = $(&apos;clsa-dcs.&apos;+stage+&apos;:QuestionnaireRun.timeEnd&apos;)
var pre = $(&apos;clsa-dcs.&apos;+stage+&apos;:QuestionnaireRun.timeStart&apos;)
if(pre.before(post).value()) {
    res = post.time().minus(pre.time()).div(1000)
}
if(null === res) {
  res = $group(
    &apos;clsa-dcs.Participants:Admin.StageInstance.stage&apos;,
    stage,
    &apos;Admin.StageInstance.duration&apos;).asSequence().sum()
}
if(res.eq(0).value()) res = null
res</attribute>
        </attributes>
      </variable>
      <variable name="duration_value" valueType="integer" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0" repeatable="true" occurrenceGroup="">
        <attributes>
          <attribute name="script" valueType="text">var res = null
if($this(&apos;duration&apos;).isNull().not().value()) {
  var stage = &apos;DiseaseSymptoms&apos;
  var list = $this(&apos;duration_name&apos;)
  var str = []
  var section = $(&apos;clsa-dcs.&apos;+stage+&apos;:QuestionnaireMetric.section&apos;).asSequence()
  var duration = $(&apos;clsa-dcs.&apos;+stage+&apos;:QuestionnaireMetric.duration&apos;).asSequence()
  for(var i = 0; i &lt; list.size(); i++) {
    str.push(
      duration.filter(
        function(v, k) {
          return list.valueAt(i).eq(section.valueAt(k))
        }
      ).asSequence().sum()
    )
  }
  res = newSequence(str, &apos;integer&apos;) 
} else {
  var str = []
  for(var i = 0; i &lt; $this(&apos;duration_name&apos;).size(); i++) str.push(null)
  res = newSequence(str,&apos;integer&apos;)
}
res</attribute>
        </attributes>
      </variable>
      <variable name="refusal_name" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0" repeatable="true" occurrenceGroup="">
        <attributes>
          <attribute name="script" valueType="text">newSequence([&apos;CAO&apos;,&apos;CCC_CANCER&apos;,&apos;CCC_CARDIAC&apos;,&apos;CCC_GASTRO&apos;,&apos;CCC_INFECTION&apos;,&apos;CCC_MENTAL&apos;,&apos;CCC_NEURO&apos;,&apos;CCC_OTHER&apos;,&apos;CCC_VISION&apos;,&apos;DEP&apos;,&apos;DIA&apos;,&apos;DPR&apos;,&apos;HBP&apos;,&apos;HYP&apos;,&apos;IHD&apos;,&apos;OAR&apos;,&apos;OSA&apos;,&apos;OSH&apos;,&apos;OSK&apos;,&apos;OST&apos;,&apos;PKD&apos;,&apos;ROS&apos;,&apos;STR&apos;,&apos;TBI&apos;],&apos;text&apos;)</attribute>
        </attributes>
      </variable>
      <variable name="refusal_value" valueType="decimal" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0" repeatable="true" occurrenceGroup="">
        <attributes>
          <attribute name="script" valueType="text">var stage = &apos;clsa-dcs.DiseaseSymptoms:&apos;
var sections={
&apos;CAO&apos;:[
&apos;CCC_ASTHM_DCS&apos;,
&apos;CAO_ASTHMAGE_DCS&apos;,
&apos;CAO_WHEZ_DCS&apos;,
&apos;CAO_SOBFLAT_DCS&apos;,
&apos;CAO_EXERT_DCS&apos;,
&apos;CAO_SOBUP_DCS&apos;,
&apos;CAO_SOBPM_DCS&apos;,
&apos;CAO_WKWHEZ_DCS&apos;,
&apos;CAO_WKCOF_DCS&apos;,
&apos;CAO_WKSOB_DCS&apos;,
&apos;CCC_COPD_DCS&apos;,
&apos;CAO_COPDAGE_DCS&apos;,
&apos;CAO_COLD_DCS&apos;,
&apos;CAO_COFPY_DCS&apos;,
&apos;CAO_COFAM_DCS&apos;,
&apos;CAO_COFMAM_DCS&apos;,
&apos;CAO_PHLEGMPY_DCS&apos;,
&apos;CAO_MED_DCS&apos;,
&apos;CAO_MEDNAME_DCS&apos;,
&apos;CAO_MED_1_DCS&apos;,
&apos;CAO_MED_2_DCS&apos;,
&apos;CAO_MED_3_DCS&apos;,
&apos;CAO_MED_4_DCS&apos;,
&apos;CAO_MED_5_DCS&apos;,
&apos;CAO_MED_6_DCS&apos;,
&apos;CAO_MED_7_DCS&apos;,
&apos;CAO_MED_8_DCS&apos;,
&apos;CAO_MED_9_DCS&apos;,
&apos;CAO_MED_10_DCS&apos;,
&apos;CAO_MED_11_DCS&apos;,
&apos;CAO_MED_12_DCS&apos;,
&apos;CAO_MED_13_DCS&apos;,
&apos;CAO_MED_14_DCS&apos;,
&apos;CAO_MED_15_DCS&apos;,
&apos;CAO_MED_16_DCS&apos;,
&apos;CAO_MED_17_DCS&apos;,
&apos;CAO_MED_18_DCS&apos;,
&apos;CAO_MED_19_DCS&apos;,
&apos;CAO_MED_20_DCS&apos;,
&apos;CAO_MED_21_DCS&apos;,
&apos;CAO_MED_22_DCS&apos;,
&apos;CAO_MED_23_DCS&apos;,
&apos;CAO_MED_24_DCS&apos;,
&apos;CAO_MED_25_DCS&apos;,
&apos;CAO_MED_26_DCS&apos;,
&apos;CAO_MED_27_DCS&apos;,
&apos;CAO_MED_28_DCS&apos;,
&apos;CAO_MED_29_DCS&apos;,
&apos;CAO_MED_30_DCS&apos;,
&apos;CAO_MED_31_DCS&apos;,
&apos;CAO_MED_32_DCS&apos;,
&apos;CAO_MED_33_DCS&apos;,
&apos;CAO_MED_34_DCS&apos;,
&apos;CAO_MED_35_DCS&apos;,
&apos;CAO_MED_36_DCS&apos;,
&apos;CAO_MED_37_DCS&apos;,
&apos;CAO_MED_38_DCS&apos;,
&apos;CAO_MED_39_DCS&apos;,
&apos;CAO_MED_40_DCS&apos;],
&apos;CCC_CANCER&apos;:[
&apos;CCC_CANC_DCS&apos;,
&apos;CCC_CANTP_DCS&apos;],
&apos;CCC_CARDIAC&apos;:[
&apos;CCC_HEART_DCS&apos;,
&apos;CCC_PVD_DCS&apos;],
&apos;CCC_GASTRO&apos;:[
&apos;CCC_ULCR_DCS&apos;,
&apos;CCC_IBDIBS_DCS&apos;,
&apos;CCC_BOWINC_DCS&apos;,
&apos;CCC_URIINC_DCS&apos;],
&apos;CCC_INFECTION&apos;:[
&apos;CCC_DRPNEU_DCS&apos;,
&apos;CCC_DRFLU_DCS&apos;,
&apos;CCC_DRUTI_DCS&apos;,
&apos;CCC_DROT_DCS&apos;,
&apos;CCC_DROTSP_DCS&apos;],
&apos;CCC_MENTAL&apos;:[
&apos;CCC_ANXI_DCS&apos;,
&apos;CCC_MOOD_DCS&apos;],
&apos;CCC_NEURO&apos;:[
&apos;CCC_MEMPB_DCS&apos;,
&apos;CCC_ALZH_DCS&apos;,
&apos;CCC_MS_DCS&apos;,
&apos;CCC_EPIL_DCS&apos;,
&apos;CCC_MGRN_DCS&apos;],
&apos;CCC_OTHER&apos;:[
&apos;CCC_ALLRG_DCS&apos;,
&apos;CCC_BCKP_DCS&apos;,
&apos;CCC_KIDN_DCS&apos;,
&apos;CCC_DITYP_DCS&apos;,
&apos;CCC_DITIM_DCS&apos;,
&apos;CCC_OTCCC_DCS&apos;],
&apos;CCC_VISION&apos;:[
&apos;CCC_MACDEG_DCS&apos;],
&apos;DEP&apos;:[
&apos;DEP_BOTR_DCS&apos;,
&apos;DEP_MIND_DCS&apos;,
&apos;DEP_FLDP_DCS&apos;,
&apos;DEP_FFRT_DCS&apos;,
&apos;DEP_HPFL_DCS&apos;,
&apos;DEP_FRFL_DCS&apos;,
&apos;DEP_RSTLS_DCS&apos;,
&apos;DEP_HAPP_DCS&apos;,
&apos;DEP_LONLY_DCS&apos;,
&apos;DEP_GTGO_DCS&apos;],
&apos;DIA&apos;:[
&apos;DIA_DIAB_DCS&apos;,
&apos;DIA_TYPE_DCS&apos;,
&apos;DIA_AGE_DCS&apos;,
&apos;DIA_EVPRG_DCS&apos;,
&apos;DIA_PRGDIA_DCS&apos;,
&apos;DIA_MED_DCS&apos;,
&apos;DIA_MEDNAME_DCS&apos;,
&apos;DIA_MEDINSNAME_DCS&apos;,
&apos;DIA_MED_1_DCS&apos;,
&apos;DIA_MED_2_DCS&apos;,
&apos;DIA_MED_3_DCS&apos;,
&apos;DIA_MED_4_DCS&apos;,
&apos;DIA_MED_5_DCS&apos;,
&apos;DIA_MED_6_DCS&apos;,
&apos;DIA_MED_7_DCS&apos;,
&apos;DIA_MED_8_DCS&apos;,
&apos;DIA_MED_9_DCS&apos;,
&apos;DIA_MED_10_DCS&apos;,
&apos;DIA_MED_11_DCS&apos;,
&apos;DIA_MED_12_DCS&apos;,
&apos;DIA_MED_13_DCS&apos;,
&apos;DIA_MED_14_DCS&apos;,
&apos;DIA_MED_15_DCS&apos;,
&apos;DIA_MED_16_DCS&apos;,
&apos;DIA_MED_17_DCS&apos;,
&apos;DIA_MED_18_DCS&apos;,
&apos;DIA_MED_19_DCS&apos;,
&apos;DIA_MED_20_DCS&apos;,
&apos;DIA_MED_21_DCS&apos;,
&apos;DIA_MED_22_DCS&apos;,
&apos;DIA_MED_23_DCS&apos;,
&apos;DIA_MED_24_DCS&apos;,
&apos;DIA_MED_25_DCS&apos;,
&apos;DIA_MED_26_DCS&apos;,
&apos;DIA_MED_27_DCS&apos;,
&apos;DIA_MED_28_DCS&apos;,
&apos;DIA_MED_29_DCS&apos;,
&apos;DIA_MED_30_DCS&apos;,
&apos;DIA_MED_31_DCS&apos;,
&apos;DIA_MED_32_DCS&apos;,
&apos;DIA_MED_33_DCS&apos;,
&apos;DIA_MED_34_DCS&apos;,
&apos;DIA_MED_35_DCS&apos;,
&apos;DIA_MED_36_DCS&apos;,
&apos;DIA_MED_37_DCS&apos;,
&apos;DIA_MED_38_DCS&apos;,
&apos;DIA_MED_39_DCS&apos;,
&apos;DIA_MED_40_DCS&apos;,
&apos;DIA_MEDAGE_DCS&apos;],
&apos;DPR&apos;:[
&apos;DPR_CLINDEP_DCS&apos;,
&apos;DPR_AGE_DCS&apos;,
&apos;DPR_MED_DCS&apos;,
&apos;DPR_MEDNAME_DCS&apos;,
&apos;DPR_MED_1_DCS&apos;,
&apos;DPR_MED_2_DCS&apos;,
&apos;DPR_MED_3_DCS&apos;,
&apos;DPR_MED_4_DCS&apos;,
&apos;DPR_MED_5_DCS&apos;,
&apos;DPR_MED_6_DCS&apos;,
&apos;DPR_MED_7_DCS&apos;,
&apos;DPR_MED_8_DCS&apos;,
&apos;DPR_MED_9_DCS&apos;,
&apos;DPR_MED_10_DCS&apos;,
&apos;DPR_MED_11_DCS&apos;,
&apos;DPR_MED_12_DCS&apos;,
&apos;DPR_MED_13_DCS&apos;,
&apos;DPR_MED_14_DCS&apos;,
&apos;DPR_MED_15_DCS&apos;,
&apos;DPR_MED_16_DCS&apos;,
&apos;DPR_MED_17_DCS&apos;,
&apos;DPR_MED_18_DCS&apos;,
&apos;DPR_MED_19_DCS&apos;,
&apos;DPR_MED_20_DCS&apos;,
&apos;DPR_MED_21_DCS&apos;,
&apos;DPR_MED_22_DCS&apos;,
&apos;DPR_MED_23_DCS&apos;,
&apos;DPR_MED_24_DCS&apos;,
&apos;DPR_MED_25_DCS&apos;,
&apos;DPR_MED_26_DCS&apos;,
&apos;DPR_MED_27_DCS&apos;,
&apos;DPR_MED_28_DCS&apos;,
&apos;DPR_MED_29_DCS&apos;,
&apos;DPR_MED_30_DCS&apos;,
&apos;DPR_MED_31_DCS&apos;,
&apos;DPR_MED_32_DCS&apos;,
&apos;DPR_MED_33_DCS&apos;,
&apos;DPR_MED_34_DCS&apos;,
&apos;DPR_MED_35_DCS&apos;,
&apos;DPR_MED_36_DCS&apos;,
&apos;DPR_MED_37_DCS&apos;,
&apos;DPR_MED_38_DCS&apos;,
&apos;DPR_MED_39_DCS&apos;,
&apos;DPR_MED_40_DCS&apos;,
&apos;DPR_OTHMD_DCS&apos;,
&apos;DPR_EVRMED_DCS&apos;],
&apos;HBP&apos;:[
&apos;CCC_HBP_DCS&apos;,
&apos;HBP_AGE_DCS&apos;,
&apos;HBP_PRG_DCS&apos;,
&apos;HBP_OTPRG_DCS&apos;,
&apos;HBP_MED_DCS&apos;,
&apos;HBP_MEDNAME_DCS&apos;,
&apos;HBP_MED_1_DCS&apos;,
&apos;HBP_MED_2_DCS&apos;,
&apos;HBP_MED_3_DCS&apos;,
&apos;HBP_MED_4_DCS&apos;,
&apos;HBP_MED_5_DCS&apos;,
&apos;HBP_MED_6_DCS&apos;,
&apos;HBP_MED_7_DCS&apos;,
&apos;HBP_MED_8_DCS&apos;,
&apos;HBP_MED_9_DCS&apos;,
&apos;HBP_MED_10_DCS&apos;,
&apos;HBP_MED_11_DCS&apos;,
&apos;HBP_MED_12_DCS&apos;,
&apos;HBP_MED_13_DCS&apos;,
&apos;HBP_MED_14_DCS&apos;,
&apos;HBP_MED_15_DCS&apos;,
&apos;HBP_MED_16_DCS&apos;,
&apos;HBP_MED_17_DCS&apos;,
&apos;HBP_MED_18_DCS&apos;,
&apos;HBP_MED_19_DCS&apos;,
&apos;HBP_MED_20_DCS&apos;,
&apos;HBP_MED_21_DCS&apos;,
&apos;HBP_MED_22_DCS&apos;,
&apos;HBP_MED_23_DCS&apos;,
&apos;HBP_MED_24_DCS&apos;,
&apos;HBP_MED_25_DCS&apos;,
&apos;HBP_MED_26_DCS&apos;,
&apos;HBP_MED_27_DCS&apos;,
&apos;HBP_MED_28_DCS&apos;,
&apos;HBP_MED_29_DCS&apos;,
&apos;HBP_MED_30_DCS&apos;,
&apos;HBP_MED_31_DCS&apos;,
&apos;HBP_MED_32_DCS&apos;,
&apos;HBP_MED_33_DCS&apos;,
&apos;HBP_MED_34_DCS&apos;,
&apos;HBP_MED_35_DCS&apos;,
&apos;HBP_MED_36_DCS&apos;,
&apos;HBP_MED_37_DCS&apos;,
&apos;HBP_MED_38_DCS&apos;,
&apos;HBP_MED_39_DCS&apos;,
&apos;HBP_MED_40_DCS&apos;,
&apos;HBP_EVRMED_DCS&apos;,
&apos;HBP_TRT_DCS&apos;,
&apos;HBP_EVTRT_DCS&apos;],
&apos;HYP&apos;:[
&apos;CCC_UTHYR_DCS&apos;,
&apos;HYP_UTHYRAGE_DCS&apos;,
&apos;HYP_UTHYRMED_DCS&apos;,
&apos;HYP_UTHYRMEDNAME_DCS&apos;,
&apos;HYP_UTHYRMED_1_DCS&apos;,
&apos;HYP_UTHYRMED_2_DCS&apos;,
&apos;HYP_UTHYRMED_3_DCS&apos;,
&apos;HYP_UTHYRMED_4_DCS&apos;,
&apos;HYP_UTHYRMED_5_DCS&apos;,
&apos;HYP_UTHYRMED_6_DCS&apos;,
&apos;HYP_UTHYRMED_7_DCS&apos;,
&apos;HYP_UTHYRMED_8_DCS&apos;,
&apos;HYP_UTHYRMED_9_DCS&apos;,
&apos;HYP_UTHYRMED_10_DCS&apos;,
&apos;HYP_UTHYRMED_11_DCS&apos;,
&apos;HYP_UTHYRMED_12_DCS&apos;,
&apos;HYP_UTHYRMED_13_DCS&apos;,
&apos;HYP_UTHYRMED_14_DCS&apos;,
&apos;HYP_UTHYRMED_15_DCS&apos;,
&apos;HYP_UTHYRMED_16_DCS&apos;,
&apos;HYP_UTHYRMED_17_DCS&apos;,
&apos;HYP_UTHYRMED_18_DCS&apos;,
&apos;HYP_UTHYRMED_19_DCS&apos;,
&apos;HYP_UTHYRMED_20_DCS&apos;,
&apos;HYP_UTHYRMED_21_DCS&apos;,
&apos;HYP_UTHYRMED_22_DCS&apos;,
&apos;HYP_UTHYRMED_23_DCS&apos;,
&apos;HYP_UTHYRMED_24_DCS&apos;,
&apos;HYP_UTHYRMED_25_DCS&apos;,
&apos;HYP_UTHYRMED_26_DCS&apos;,
&apos;HYP_UTHYRMED_27_DCS&apos;,
&apos;HYP_UTHYRMED_28_DCS&apos;,
&apos;HYP_UTHYRMED_29_DCS&apos;,
&apos;HYP_UTHYRMED_30_DCS&apos;,
&apos;HYP_UTHYRMED_31_DCS&apos;,
&apos;HYP_UTHYRMED_32_DCS&apos;,
&apos;HYP_UTHYRMED_33_DCS&apos;,
&apos;HYP_UTHYRMED_34_DCS&apos;,
&apos;HYP_UTHYRMED_35_DCS&apos;,
&apos;HYP_UTHYRMED_36_DCS&apos;,
&apos;HYP_UTHYRMED_37_DCS&apos;,
&apos;HYP_UTHYRMED_38_DCS&apos;,
&apos;HYP_UTHYRMED_39_DCS&apos;,
&apos;HYP_UTHYRMED_40_DCS&apos;,
&apos;HYP_UTHYREVRMED_DCS&apos;,
&apos;CCC_OTHYR_DCS&apos;,
&apos;HYP_OTHYRAGE_DCS&apos;,
&apos;HYP_OTHYRMED_DCS&apos;,
&apos;HYP_OTHYRMEDNAME_DCS&apos;,
&apos;HYP_OTHYRMED_1_DCS&apos;,
&apos;HYP_OTHYRMED_2_DCS&apos;,
&apos;HYP_OTHYRMED_3_DCS&apos;,
&apos;HYP_OTHYRMED_4_DCS&apos;,
&apos;HYP_OTHYRMED_5_DCS&apos;,
&apos;HYP_OTHYRMED_6_DCS&apos;,
&apos;HYP_OTHYRMED_7_DCS&apos;,
&apos;HYP_OTHYRMED_8_DCS&apos;,
&apos;HYP_OTHYRMED_9_DCS&apos;,
&apos;HYP_OTHYRMED_10_DCS&apos;,
&apos;HYP_OTHYRMED_11_DCS&apos;,
&apos;HYP_OTHYRMED_12_DCS&apos;,
&apos;HYP_OTHYRMED_13_DCS&apos;,
&apos;HYP_OTHYRMED_14_DCS&apos;,
&apos;HYP_OTHYRMED_15_DCS&apos;,
&apos;HYP_OTHYRMED_16_DCS&apos;,
&apos;HYP_OTHYRMED_17_DCS&apos;,
&apos;HYP_OTHYRMED_18_DCS&apos;,
&apos;HYP_OTHYRMED_19_DCS&apos;,
&apos;HYP_OTHYRMED_20_DCS&apos;,
&apos;HYP_OTHYRMED_21_DCS&apos;,
&apos;HYP_OTHYRMED_22_DCS&apos;,
&apos;HYP_OTHYRMED_23_DCS&apos;,
&apos;HYP_OTHYRMED_24_DCS&apos;,
&apos;HYP_OTHYRMED_25_DCS&apos;,
&apos;HYP_OTHYRMED_26_DCS&apos;,
&apos;HYP_OTHYRMED_27_DCS&apos;,
&apos;HYP_OTHYRMED_28_DCS&apos;,
&apos;HYP_OTHYRMED_29_DCS&apos;,
&apos;HYP_OTHYRMED_30_DCS&apos;,
&apos;HYP_OTHYRMED_31_DCS&apos;,
&apos;HYP_OTHYRMED_32_DCS&apos;,
&apos;HYP_OTHYRMED_33_DCS&apos;,
&apos;HYP_OTHYRMED_34_DCS&apos;,
&apos;HYP_OTHYRMED_35_DCS&apos;,
&apos;HYP_OTHYRMED_36_DCS&apos;,
&apos;HYP_OTHYRMED_37_DCS&apos;,
&apos;HYP_OTHYRMED_38_DCS&apos;,
&apos;HYP_OTHYRMED_39_DCS&apos;,
&apos;HYP_OTHYRMED_40_DCS&apos;,
&apos;HYP_OTHYREVRMD_DCS&apos;],
&apos;IHD&apos;:[
&apos;CCC_ANGI_DCS&apos;,
&apos;IHD_ANGIAGE_DCS&apos;,
&apos;CCC_AMI_DCS&apos;,
&apos;IHD_AMIAGE_DCS&apos;,
&apos;IHD_CAB_DCS&apos;,
&apos;IHD_ANGIO_DCS&apos;,
&apos;IHD_BLOCK_DCS&apos;,
&apos;IHD_MED_DCS&apos;,
&apos;IHD_MEDNAME_DCS&apos;,
&apos;IHD_MED_1_DCS&apos;,
&apos;IHD_MED_2_DCS&apos;,
&apos;IHD_MED_3_DCS&apos;,
&apos;IHD_MED_4_DCS&apos;,
&apos;IHD_MED_5_DCS&apos;,
&apos;IHD_MED_6_DCS&apos;,
&apos;IHD_MED_7_DCS&apos;,
&apos;IHD_MED_8_DCS&apos;,
&apos;IHD_MED_9_DCS&apos;,
&apos;IHD_MED_10_DCS&apos;,
&apos;IHD_MED_11_DCS&apos;,
&apos;IHD_MED_12_DCS&apos;,
&apos;IHD_MED_13_DCS&apos;,
&apos;IHD_MED_14_DCS&apos;,
&apos;IHD_MED_15_DCS&apos;,
&apos;IHD_MED_16_DCS&apos;,
&apos;IHD_MED_17_DCS&apos;,
&apos;IHD_MED_18_DCS&apos;,
&apos;IHD_MED_19_DCS&apos;,
&apos;IHD_MED_20_DCS&apos;,
&apos;IHD_MED_21_DCS&apos;,
&apos;IHD_MED_22_DCS&apos;,
&apos;IHD_MED_23_DCS&apos;,
&apos;IHD_MED_24_DCS&apos;,
&apos;IHD_MED_25_DCS&apos;,
&apos;IHD_MED_26_DCS&apos;,
&apos;IHD_MED_27_DCS&apos;,
&apos;IHD_MED_28_DCS&apos;,
&apos;IHD_MED_29_DCS&apos;,
&apos;IHD_MED_30_DCS&apos;,
&apos;IHD_MED_31_DCS&apos;,
&apos;IHD_MED_32_DCS&apos;,
&apos;IHD_MED_33_DCS&apos;,
&apos;IHD_MED_34_DCS&apos;,
&apos;IHD_MED_35_DCS&apos;,
&apos;IHD_MED_36_DCS&apos;,
&apos;IHD_MED_37_DCS&apos;,
&apos;IHD_MED_38_DCS&apos;,
&apos;IHD_MED_39_DCS&apos;,
&apos;IHD_MED_40_DCS&apos;,
&apos;IHD_EVRMED_DCS&apos;],
&apos;OAR&apos;:[
&apos;CCC_RA_DCS&apos;,
&apos;CCC_ARTOT_DCS&apos;,
&apos;OAR_AGE_DCS&apos;,
&apos;OAR_MED_DCS&apos;,
&apos;OAR_MEDOT_DCS&apos;],
&apos;OSA&apos;:[
&apos;CCC_OAHAND_DCS&apos;,
&apos;OSA_AGE_DCS&apos;,
&apos;OSA_LGJNT_DCS&apos;,
&apos;OSA_NBFNG_DCS&apos;,
&apos;OSA_PAINJNT_DCS&apos;,
&apos;OSA_LGTMB_DCS&apos;,
&apos;OSA_PAINTMB_DCS&apos;],
&apos;OSH&apos;:[
&apos;CCC_OAHIP_DCS&apos;,
&apos;OSH_AGE_DCS&apos;,
&apos;OSH_HIPRPL_DCS&apos;,
&apos;OSH_FRAC_DCS&apos;,
&apos;OSH_PAIN_DCS&apos;,
&apos;OSH_PAINSL_DCS&apos;,
&apos;OSH_LOM_DCS&apos;],
&apos;OSK&apos;:[
&apos;CCC_OAKNEE_DCS&apos;,
&apos;OSK_AGE_DCS&apos;,
&apos;OSK_KNERPL_DCS&apos;,
&apos;OSK_PAIN_DCS&apos;,
&apos;OSK_PAINSL_DCS&apos;,
&apos;OSK_SWELL_DCS&apos;],
&apos;OST&apos;:[
&apos;CCC_OSTPO_DCS&apos;,
&apos;OST_AGE_DCS&apos;,
&apos;OST_MED_DCS&apos;,
&apos;OST_MEDNAME_DCS&apos;,
&apos;OST_MED_1_DCS&apos;,
&apos;OST_MED_2_DCS&apos;,
&apos;OST_MED_3_DCS&apos;,
&apos;OST_MED_4_DCS&apos;,
&apos;OST_MED_5_DCS&apos;,
&apos;OST_MED_6_DCS&apos;,
&apos;OST_MED_7_DCS&apos;,
&apos;OST_MED_8_DCS&apos;,
&apos;OST_MED_9_DCS&apos;,
&apos;OST_MED_10_DCS&apos;,
&apos;OST_MED_11_DCS&apos;,
&apos;OST_MED_12_DCS&apos;,
&apos;OST_MED_13_DCS&apos;,
&apos;OST_MED_14_DCS&apos;,
&apos;OST_MED_15_DCS&apos;,
&apos;OST_MED_16_DCS&apos;,
&apos;OST_MED_17_DCS&apos;,
&apos;OST_MED_18_DCS&apos;,
&apos;OST_MED_19_DCS&apos;,
&apos;OST_MED_20_DCS&apos;,
&apos;OST_MED_21_DCS&apos;,
&apos;OST_MED_22_DCS&apos;,
&apos;OST_MED_23_DCS&apos;,
&apos;OST_MED_24_DCS&apos;,
&apos;OST_MED_25_DCS&apos;,
&apos;OST_MED_26_DCS&apos;,
&apos;OST_MED_27_DCS&apos;,
&apos;OST_MED_28_DCS&apos;,
&apos;OST_MED_29_DCS&apos;,
&apos;OST_MED_30_DCS&apos;,
&apos;OST_MED_31_DCS&apos;,
&apos;OST_MED_32_DCS&apos;,
&apos;OST_MED_33_DCS&apos;,
&apos;OST_MED_34_DCS&apos;,
&apos;OST_MED_35_DCS&apos;,
&apos;OST_MED_36_DCS&apos;,
&apos;OST_MED_37_DCS&apos;,
&apos;OST_MED_38_DCS&apos;,
&apos;OST_MED_39_DCS&apos;,
&apos;OST_MED_40_DCS&apos;,
&apos;OST_EVRMD_DCS&apos;,
&apos;OST_BONE_DCS&apos;,
&apos;OST_FRAC_DCS&apos;,
&apos;OST_MOM_DCS&apos;,
&apos;OST_DAD_DCS&apos;,
&apos;OST_HGT_DCS&apos;,
&apos;OST_CST_DCS&apos;,
&apos;OST_CSTAGE_DCS&apos;,
&apos;OST_CST_MT_DCS&apos;,
&apos;OST_BP_DCS&apos;,
&apos;OST_BP_DUR_DCS&apos;,
&apos;OST_BCKPPM_DCS&apos;,
&apos;OST_BCKPLOC_DCS&apos;],
&apos;PKD&apos;:[
&apos;CCC_PARK_DCS&apos;,
&apos;PKD_AGE_DCS&apos;,
&apos;PKD_MED_DCS&apos;,
&apos;PKD_MEDNAME_DCS&apos;,
&apos;PKD_MED_1_DCS&apos;,
&apos;PKD_MED_2_DCS&apos;,
&apos;PKD_MED_3_DCS&apos;,
&apos;PKD_MED_4_DCS&apos;,
&apos;PKD_MED_5_DCS&apos;,
&apos;PKD_MED_6_DCS&apos;,
&apos;PKD_MED_7_DCS&apos;,
&apos;PKD_MED_8_DCS&apos;,
&apos;PKD_MED_9_DCS&apos;,
&apos;PKD_MED_10_DCS&apos;,
&apos;PKD_MED_11_DCS&apos;,
&apos;PKD_MED_12_DCS&apos;,
&apos;PKD_MED_13_DCS&apos;,
&apos;PKD_MED_14_DCS&apos;,
&apos;PKD_MED_15_DCS&apos;,
&apos;PKD_MED_16_DCS&apos;,
&apos;PKD_MED_17_DCS&apos;,
&apos;PKD_MED_18_DCS&apos;,
&apos;PKD_MED_19_DCS&apos;,
&apos;PKD_MED_20_DCS&apos;,
&apos;PKD_MED_21_DCS&apos;,
&apos;PKD_MED_22_DCS&apos;,
&apos;PKD_MED_23_DCS&apos;,
&apos;PKD_MED_24_DCS&apos;,
&apos;PKD_MED_25_DCS&apos;,
&apos;PKD_MED_26_DCS&apos;,
&apos;PKD_MED_27_DCS&apos;,
&apos;PKD_MED_28_DCS&apos;,
&apos;PKD_MED_29_DCS&apos;,
&apos;PKD_MED_30_DCS&apos;,
&apos;PKD_MED_31_DCS&apos;,
&apos;PKD_MED_32_DCS&apos;,
&apos;PKD_MED_33_DCS&apos;,
&apos;PKD_MED_34_DCS&apos;,
&apos;PKD_MED_35_DCS&apos;,
&apos;PKD_MED_36_DCS&apos;,
&apos;PKD_MED_37_DCS&apos;,
&apos;PKD_MED_38_DCS&apos;,
&apos;PKD_MED_39_DCS&apos;,
&apos;PKD_MED_40_DCS&apos;,
&apos;PKD_OTHMD_DCS&apos;,
&apos;PKD_EVRMED_DCS&apos;,
&apos;PKD_SHKE_DCS&apos;,
&apos;PKD_SHKSEV_DCS&apos;,
&apos;PKD_SMWRT_DCS&apos;,
&apos;PKD_BUTON_DCS&apos;,
&apos;PKD_VOICE_DCS&apos;,
&apos;PKD_FEET_DCS&apos;,
&apos;PKD_WALK_DCS&apos;,
&apos;PKD_BAL_DCS&apos;,
&apos;PKD_FACE_DCS&apos;,
&apos;PKD_RISE_DCS&apos;],
&apos;ROS&apos;:[
&apos;ROS_PAIN_DCS&apos;,
&apos;ROS_HILL_DCS&apos;,
&apos;ROS_LEVEL_DCS&apos;,
&apos;ROS_BLOCK_DCS&apos;,
&apos;ROS_DOWLK_DCS&apos;,
&apos;ROS_STILL_DCS&apos;,
&apos;ROS_SOON_DCS&apos;,
&apos;ROS_LOC_DCS&apos;,
&apos;ROS_SEVPAIN_DCS&apos;],
&apos;STR&apos;:[
&apos;CCC_CVA_DCS&apos;,
&apos;STR_CVAAGE_DCS&apos;,
&apos;STR_MED_DCS&apos;,
&apos;STR_MEDNAME_DCS&apos;,
&apos;STR_MED_1_DCS&apos;,
&apos;STR_MED_2_DCS&apos;,
&apos;STR_MED_3_DCS&apos;,
&apos;STR_MED_4_DCS&apos;,
&apos;STR_MED_5_DCS&apos;,
&apos;STR_MED_6_DCS&apos;,
&apos;STR_MED_7_DCS&apos;,
&apos;STR_MED_8_DCS&apos;,
&apos;STR_MED_9_DCS&apos;,
&apos;STR_MED_10_DCS&apos;,
&apos;STR_MED_11_DCS&apos;,
&apos;STR_MED_12_DCS&apos;,
&apos;STR_MED_13_DCS&apos;,
&apos;STR_MED_14_DCS&apos;,
&apos;STR_MED_15_DCS&apos;,
&apos;STR_MED_16_DCS&apos;,
&apos;STR_MED_17_DCS&apos;,
&apos;STR_MED_18_DCS&apos;,
&apos;STR_MED_19_DCS&apos;,
&apos;STR_MED_20_DCS&apos;,
&apos;STR_MED_21_DCS&apos;,
&apos;STR_MED_22_DCS&apos;,
&apos;STR_MED_23_DCS&apos;,
&apos;STR_MED_24_DCS&apos;,
&apos;STR_MED_25_DCS&apos;,
&apos;STR_MED_26_DCS&apos;,
&apos;STR_MED_27_DCS&apos;,
&apos;STR_MED_28_DCS&apos;,
&apos;STR_MED_29_DCS&apos;,
&apos;STR_MED_30_DCS&apos;,
&apos;STR_MED_31_DCS&apos;,
&apos;STR_MED_32_DCS&apos;,
&apos;STR_MED_33_DCS&apos;,
&apos;STR_MED_34_DCS&apos;,
&apos;STR_MED_35_DCS&apos;,
&apos;STR_MED_36_DCS&apos;,
&apos;STR_MED_37_DCS&apos;,
&apos;STR_MED_38_DCS&apos;,
&apos;STR_MED_39_DCS&apos;,
&apos;STR_MED_40_DCS&apos;,
&apos;STR_OTHMD_DCS&apos;,
&apos;STR_EVRMD_DCS&apos;,
&apos;CCC_TIA_DCS&apos;,
&apos;STR_TIAAGE_DCS&apos;,
&apos;STR_TIAMED_DCS&apos;,
&apos;STR_TIAMEDNAME_DCS&apos;,
&apos;STR_TIAMED_1_DCS&apos;,
&apos;STR_TIAMED_2_DCS&apos;,
&apos;STR_TIAMED_3_DCS&apos;,
&apos;STR_TIAMED_4_DCS&apos;,
&apos;STR_TIAMED_5_DCS&apos;,
&apos;STR_TIAMED_6_DCS&apos;,
&apos;STR_TIAMED_7_DCS&apos;,
&apos;STR_TIAMED_8_DCS&apos;,
&apos;STR_TIAMED_9_DCS&apos;,
&apos;STR_TIAMED_10_DCS&apos;,
&apos;STR_TIAMED_11_DCS&apos;,
&apos;STR_TIAMED_12_DCS&apos;,
&apos;STR_TIAMED_13_DCS&apos;,
&apos;STR_TIAMED_14_DCS&apos;,
&apos;STR_TIAMED_15_DCS&apos;,
&apos;STR_TIAMED_16_DCS&apos;,
&apos;STR_TIAMED_17_DCS&apos;,
&apos;STR_TIAMED_18_DCS&apos;,
&apos;STR_TIAMED_19_DCS&apos;,
&apos;STR_TIAMED_20_DCS&apos;,
&apos;STR_TIAMED_21_DCS&apos;,
&apos;STR_TIAMED_22_DCS&apos;,
&apos;STR_TIAMED_23_DCS&apos;,
&apos;STR_TIAMED_24_DCS&apos;,
&apos;STR_TIAMED_25_DCS&apos;,
&apos;STR_TIAMED_26_DCS&apos;,
&apos;STR_TIAMED_27_DCS&apos;,
&apos;STR_TIAMED_28_DCS&apos;,
&apos;STR_TIAMED_29_DCS&apos;,
&apos;STR_TIAMED_30_DCS&apos;,
&apos;STR_TIAMED_31_DCS&apos;,
&apos;STR_TIAMED_32_DCS&apos;,
&apos;STR_TIAMED_33_DCS&apos;,
&apos;STR_TIAMED_34_DCS&apos;,
&apos;STR_TIAMED_35_DCS&apos;,
&apos;STR_TIAMED_36_DCS&apos;,
&apos;STR_TIAMED_37_DCS&apos;,
&apos;STR_TIAMED_38_DCS&apos;,
&apos;STR_TIAMED_39_DCS&apos;,
&apos;STR_TIAMED_40_DCS&apos;,
&apos;STR_TIAOTHMD_DCS&apos;,
&apos;STR_TIAEVMD_DCS&apos;,
&apos;CCC_CVAFX_DCS&apos;,
&apos;STR_WEAK_DCS&apos;,
&apos;STR_WEAK_DUR_DCS&apos;,
&apos;STR_NUMB_DCS&apos;,
&apos;STR_NUMB_DUR_DCS&apos;,
&apos;STR_VIS_DCS&apos;,
&apos;STR_VIS_DUR_DCS&apos;,
&apos;STR_NOVIS_DCS&apos;,
&apos;STR_NOVIS_DUR_DCS&apos;,
&apos;STR_NOUND_DCS&apos;,
&apos;STR_NOUND_DUR_DCS&apos;,
&apos;STR_NOEXP_DCS&apos;,
&apos;STR_NOEXP_DUR_DCS&apos;],
&apos;TBI&apos;:[
&apos;TBI_TYP_DCS&apos;,
&apos;TBI_NMBR_DCS&apos;,
&apos;TBI_RSLT_DCS&apos;,
&apos;TBI_MCR_DCS&apos;,
&apos;TBI_PROB_DCS&apos;]
}

var str = []
for(var key in sections) {
  var rcount = 0
  var qcount = 0
  var arr = sections[key]
  for(var i = 0; i &lt; arr.length; i++) {
    var j = $(stage + arr[i])
    if(j.isNull().value()) {
      continue
    }  
    qcount++
    rcount += j.any(&apos;REFUSED&apos;).value() ? 1 : 0
  }
  if(0 == qcount) {
    str.push(null)
  } else {
    str.push(100.0*rcount/qcount)
  }
}
newSequence(str, &apos;decimal&apos;)</attribute>
        </attributes>
      </variable>
    </variables>
  </variables>
  <created valueType="datetime">2019-04-11T13:44:20.232-04</created>
  <updated valueType="datetime">2019-05-13T08:58:02.638-04</updated>
</org.obiba.magma.views.View>