{"from": ["clsa-dcs.Participants","clsa-dcs.DiseaseSymptoms"],"name": "QC_BL_disease_qnaire","datasourceName": "cosmos_dcs","Magma.VariableListViewDto.view": {"variables": [{"name": "technician","entityType": "Participant","valueType": "text","mimeType": "","isRepeatable": false,"attributes": [{"name": "script","value": "$('clsa-dcs.DiseaseSymptoms:QuestionnaireRun.user').whenNull(\n  $group('Admin.Action.stage','DiseaseSymptoms','Admin.Action.user').asSequence().last()).lowerCase()"}],"unit": "","index": 0,"referencedEntityType": ""},{"name": "skip","entityType": "Participant","valueType": "text","mimeType": "","isRepeatable": false,"attributes": [{"name": "script","value": "var stage = 'DiseaseSymptoms'\nvar action = $group('Admin.Action.stage',stage,'Admin.Action.actionType').asSequence()\nvar res = $group('Admin.Action.stage',stage,'Admin.Action.eventReason').asSequence().filter(function(v,i){\n  return i == action.indexOf('SKIP')\n  }).last()\nif(res.isNull().not().value()) {\n  res = newValue(res.value().slice(14),'text')  \n}\nres"}],"unit": "","index": 0,"referencedEntityType": ""},{"name": "contraindicated","entityType": "Participant","valueType": "boolean","mimeType": "","isRepeatable": false,"attributes": [{"name": "script","value": "$group('clsa-dcs.Participants:Admin.StageInstance.stage','DiseaseSymptoms',\n'Admin.StageInstance.lastState').any('Contraindicated','NotApplicable')"}],"unit": "","index": 0,"referencedEntityType": ""},{"name": "comment","entityType": "Participant","valueType": "text","mimeType": "","isRepeatable": false,"attributes": [{"name": "script","value": "// this script compounds repeated comments by using lowercase comment strings as array keys\n//\nvar stage = 'DiseaseSymptoms'\nvar c_seq = $group('Admin.Action.stage',stage,'Admin.Action.comment').asSequence()\nvar e_seq = $group('Admin.Action.stage',stage,'Admin.Action.eventReason').asSequence()\nvar res = null\nif(c_seq.size().eq(e_seq.size()).value())\n{\n  var c_str = []  // string array of comments\n  var e_str = []  // string array of event reasons\n\n  for(var i = 0; i < c_seq.size(); i++) {\n    var c = c_seq.valueAt(i).value()\n    if(null == c) continue\n    c = c.replace(/[^a-zA-Z0-9 àâäèéêëîïôœùûüÿçÀÂÄÈÉÊËÎÏÔŒÙÛÜŸÇ]/g,\"\")\n    var e = e_seq.valueAt(i).value()\n    if(0 < c.length) {\n      c_str.push(c)\n      if(null != e && 0 < e.length) {\n        e = e.slice(14)\n      } else {\n        e = 'SeeComment'\n      }\n      e_str.push(e)\n    }\n  }\n\n  if(0 < c_str.length) {\n    var arr = []  // array of event reasons\n    var key_orig = []  // array of lower cased comments as unique keys\n    for(var i = 0; i < c_str.length; i++) {\n      var key = c_str[i]\n      var key_lower = key.toLowerCase()\n      // retain the first encountered instance of the comment\n      //\n      if(undefined === key_orig[key_lower])\n        key_orig[key_lower] = key\n\n      if(undefined === arr[e_str[i]])\n        arr[e_str[i]] = []\n\n      if(-1===arr[e_str[i]].indexOf(key_orig[key_lower]))\n        arr[e_str[i]].push(key_orig[key_lower])\n    }\n\n    // loop over the final array of event reasons and their sets of comments\n    //\n    var str = '{'\n    for(var key in arr) {\n      str += '\"' + key + '\":['\n      var t = []\n      for(var i = 0; i < arr[key].length; i++) {\n        t.push('\"' + arr[key][i] + '\"')\n      }\n      str += t.join(',') + '],'\n    }\n\n    res = newValue(str.substring(0,str.length-1)+'}','text')\n  }\n}\nres"}],"unit": "","index": 0,"referencedEntityType": ""},{"name": "qnaire_complete","entityType": "Participant","valueType": "decimal","mimeType": "","isRepeatable": false,"attributes": [{"name": "script","value": "var stage = 'DiseaseSymptoms'\nvar p = $('clsa-dcs.' + stage + ':QuestionnaireMetric.missingCount').asSequence()\nvar q = $('clsa-dcs.' + stage + ':QuestionnaireMetric.questionCount').asSequence()\nvar res = null\nif(p.isNull().or(q.isNull(),q.sum().eq(0)).not().value()) {\n  res = q.sum().minus(p.sum()).multiply(100).div(q.sum())\n}\nres"}],"unit": "","index": 0,"referencedEntityType": ""},{"name": "missing","entityType": "Participant","valueType": "boolean","mimeType": "","isRepeatable": false,"attributes": [{"name": "script","value": "$this('contraindicated').not().and(\n  $this('skip').isNull(),\n  $this('qnaire_complete').isNull(),\n  $this('meta_stage_duration').isNull())"}],"unit": "","index": 0,"referencedEntityType": ""},{"name": "meta_module_name","entityType": "Participant","valueType": "text","mimeType": "","isRepeatable": true,"occurrenceGroup": "","attributes": [{"name": "script","value": "newSequence(['CAO','CCC_CANCER','CCC_CARDIAC','CCC_GASTRO','CCC_INFECTION',\n  'CCC_MENTAL','CCC_NEURO','CCC_OTHER','CCC_VISION','DEP','DIA','DPR','HBP',\n  'HYP','IHD','OAR','OSA','OSH','OSK','OST','PKD','ROS','STR','TBI'], 'text')"}],"unit": "","index": 0,"referencedEntityType": ""},{"name": "duration_name","entityType": "Participant","valueType": "text","mimeType": "","isRepeatable": true,"occurrenceGroup": "","attributes": [{"name": "script","value": "newSequence(['stage'], 'text').append($this('meta_module_name'))"}],"unit": "","index": 0,"referencedEntityType": ""},{"name": "meta_stage_duration","entityType": "Participant","valueType": "integer","mimeType": "","isRepeatable": false,"attributes": [{"name": "script","value": "var stage = 'DiseaseSymptoms'\nvar res = null\nvar post = $('clsa-dcs.'+stage+':QuestionnaireRun.timeEnd')\nvar pre = $('clsa-dcs.'+stage+':QuestionnaireRun.timeStart')\nif(pre.before(post).value()) {\n    res = post.time().minus(pre.time()).div(1000)\n}\nif(null === res) {\n  res = $group(\n    'clsa-dcs.Participants:Admin.StageInstance.stage',\n    stage,\n    'Admin.StageInstance.duration').asSequence().sum()\n}\nif(res.eq(0).value()) res = null\nres"}],"unit": "","index": 0,"referencedEntityType": ""},{"name": "meta_module_duration","entityType": "Participant","valueType": "integer","mimeType": "","isRepeatable": true,"occurrenceGroup": "","attributes": [{"name": "script","value": "var res = null\nif($this('meta_stage_duration').isNull().not().value()) {\n  var stage = 'DiseaseSymptoms'\n  var list = $this('meta_module_name')\n  var str = []\n  var section = $('clsa-dcs.'+stage+':QuestionnaireMetric.section').asSequence()\n  var duration = $('clsa-dcs.'+stage+':QuestionnaireMetric.duration').asSequence()\n  for(var i = 0; i < list.size(); i++) {\n    str.push(\n      duration.filter(\n        function(v, k) {\n          return list.valueAt(i).eq(section.valueAt(k))\n        }\n      ).asSequence().sum()\n    )\n  }\n  res = newSequence(str, 'integer') \n} else {\n  var str = []\n  for(var i = 0; i < $this('meta_module_name').size(); i++) str.push(null)\n  res = newSequence(str,'integer')\n}\nres"}],"unit": "","index": 0,"referencedEntityType": ""},{"name": "duration_value","entityType": "Participant","valueType": "integer","mimeType": "","isRepeatable": true,"occurrenceGroup": "","attributes": [{"name": "script","value": "newSequence($this('meta_stage_duration'),'integer').append($this('meta_module_duration'))"}],"unit": "","index": 0,"referencedEntityType": ""},{"name": "refusal_name","entityType": "Participant","valueType": "text","mimeType": "","isRepeatable": true,"occurrenceGroup": "","attributes": [{"name": "script","value": "$this('meta_module_name')"}],"unit": "","index": 0,"referencedEntityType": ""},{"name": "refusal_value","entityType": "Participant","valueType": "decimal","mimeType": "","isRepeatable": true,"occurrenceGroup": "","attributes": [{"name": "script","value": "var stage = 'clsa-dcs.DiseaseSymptoms:'\nvar sections={\n'CAO':[\n'CCC_ASTHM_DCS',\n'CAO_ASTHMAGE_DCS',\n'CAO_WHEZ_DCS',\n'CAO_SOBFLAT_DCS',\n'CAO_EXERT_DCS',\n'CAO_SOBUP_DCS',\n'CAO_SOBPM_DCS',\n'CAO_WKWHEZ_DCS',\n'CAO_WKCOF_DCS',\n'CAO_WKSOB_DCS',\n'CCC_COPD_DCS',\n'CAO_COPDAGE_DCS',\n'CAO_COLD_DCS',\n'CAO_COFPY_DCS',\n'CAO_COFAM_DCS',\n'CAO_COFMAM_DCS',\n'CAO_PHLEGMPY_DCS',\n'CAO_MED_DCS',\n'CAO_MEDNAME_DCS',\n'CAO_MED_1_DCS',\n'CAO_MED_2_DCS',\n'CAO_MED_3_DCS',\n'CAO_MED_4_DCS',\n'CAO_MED_5_DCS',\n'CAO_MED_6_DCS',\n'CAO_MED_7_DCS',\n'CAO_MED_8_DCS',\n'CAO_MED_9_DCS',\n'CAO_MED_10_DCS',\n'CAO_MED_11_DCS',\n'CAO_MED_12_DCS',\n'CAO_MED_13_DCS',\n'CAO_MED_14_DCS',\n'CAO_MED_15_DCS',\n'CAO_MED_16_DCS',\n'CAO_MED_17_DCS',\n'CAO_MED_18_DCS',\n'CAO_MED_19_DCS',\n'CAO_MED_20_DCS',\n'CAO_MED_21_DCS',\n'CAO_MED_22_DCS',\n'CAO_MED_23_DCS',\n'CAO_MED_24_DCS',\n'CAO_MED_25_DCS',\n'CAO_MED_26_DCS',\n'CAO_MED_27_DCS',\n'CAO_MED_28_DCS',\n'CAO_MED_29_DCS',\n'CAO_MED_30_DCS',\n'CAO_MED_31_DCS',\n'CAO_MED_32_DCS',\n'CAO_MED_33_DCS',\n'CAO_MED_34_DCS',\n'CAO_MED_35_DCS',\n'CAO_MED_36_DCS',\n'CAO_MED_37_DCS',\n'CAO_MED_38_DCS',\n'CAO_MED_39_DCS',\n'CAO_MED_40_DCS'],\n'CCC_CANCER':[\n'CCC_CANC_DCS',\n'CCC_CANTP_DCS'],\n'CCC_CARDIAC':[\n'CCC_HEART_DCS',\n'CCC_PVD_DCS'],\n'CCC_GASTRO':[\n'CCC_ULCR_DCS',\n'CCC_IBDIBS_DCS',\n'CCC_BOWINC_DCS',\n'CCC_URIINC_DCS'],\n'CCC_INFECTION':[\n'CCC_DRPNEU_DCS',\n'CCC_DRFLU_DCS',\n'CCC_DRUTI_DCS',\n'CCC_DROT_DCS',\n'CCC_DROTSP_DCS'],\n'CCC_MENTAL':[\n'CCC_ANXI_DCS',\n'CCC_MOOD_DCS'],\n'CCC_NEURO':[\n'CCC_MEMPB_DCS',\n'CCC_ALZH_DCS',\n'CCC_MS_DCS',\n'CCC_EPIL_DCS',\n'CCC_MGRN_DCS'],\n'CCC_OTHER':[\n'CCC_ALLRG_DCS',\n'CCC_BCKP_DCS',\n'CCC_KIDN_DCS',\n'CCC_DITYP_DCS',\n'CCC_DITIM_DCS',\n'CCC_OTCCC_DCS'],\n'CCC_VISION':[\n'CCC_MACDEG_DCS'],\n'DEP':[\n'DEP_BOTR_DCS',\n'DEP_MIND_DCS',\n'DEP_FLDP_DCS',\n'DEP_FFRT_DCS',\n'DEP_HPFL_DCS',\n'DEP_FRFL_DCS',\n'DEP_RSTLS_DCS',\n'DEP_HAPP_DCS',\n'DEP_LONLY_DCS',\n'DEP_GTGO_DCS'],\n'DIA':[\n'DIA_DIAB_DCS',\n'DIA_TYPE_DCS',\n'DIA_AGE_DCS',\n'DIA_EVPRG_DCS',\n'DIA_PRGDIA_DCS',\n'DIA_MED_DCS',\n'DIA_MEDNAME_DCS',\n'DIA_MEDINSNAME_DCS',\n'DIA_MED_1_DCS',\n'DIA_MED_2_DCS',\n'DIA_MED_3_DCS',\n'DIA_MED_4_DCS',\n'DIA_MED_5_DCS',\n'DIA_MED_6_DCS',\n'DIA_MED_7_DCS',\n'DIA_MED_8_DCS',\n'DIA_MED_9_DCS',\n'DIA_MED_10_DCS',\n'DIA_MED_11_DCS',\n'DIA_MED_12_DCS',\n'DIA_MED_13_DCS',\n'DIA_MED_14_DCS',\n'DIA_MED_15_DCS',\n'DIA_MED_16_DCS',\n'DIA_MED_17_DCS',\n'DIA_MED_18_DCS',\n'DIA_MED_19_DCS',\n'DIA_MED_20_DCS',\n'DIA_MED_21_DCS',\n'DIA_MED_22_DCS',\n'DIA_MED_23_DCS',\n'DIA_MED_24_DCS',\n'DIA_MED_25_DCS',\n'DIA_MED_26_DCS',\n'DIA_MED_27_DCS',\n'DIA_MED_28_DCS',\n'DIA_MED_29_DCS',\n'DIA_MED_30_DCS',\n'DIA_MED_31_DCS',\n'DIA_MED_32_DCS',\n'DIA_MED_33_DCS',\n'DIA_MED_34_DCS',\n'DIA_MED_35_DCS',\n'DIA_MED_36_DCS',\n'DIA_MED_37_DCS',\n'DIA_MED_38_DCS',\n'DIA_MED_39_DCS',\n'DIA_MED_40_DCS',\n'DIA_MEDAGE_DCS'],\n'DPR':[\n'DPR_CLINDEP_DCS',\n'DPR_AGE_DCS',\n'DPR_MED_DCS',\n'DPR_MEDNAME_DCS',\n'DPR_MED_1_DCS',\n'DPR_MED_2_DCS',\n'DPR_MED_3_DCS',\n'DPR_MED_4_DCS',\n'DPR_MED_5_DCS',\n'DPR_MED_6_DCS',\n'DPR_MED_7_DCS',\n'DPR_MED_8_DCS',\n'DPR_MED_9_DCS',\n'DPR_MED_10_DCS',\n'DPR_MED_11_DCS',\n'DPR_MED_12_DCS',\n'DPR_MED_13_DCS',\n'DPR_MED_14_DCS',\n'DPR_MED_15_DCS',\n'DPR_MED_16_DCS',\n'DPR_MED_17_DCS',\n'DPR_MED_18_DCS',\n'DPR_MED_19_DCS',\n'DPR_MED_20_DCS',\n'DPR_MED_21_DCS',\n'DPR_MED_22_DCS',\n'DPR_MED_23_DCS',\n'DPR_MED_24_DCS',\n'DPR_MED_25_DCS',\n'DPR_MED_26_DCS',\n'DPR_MED_27_DCS',\n'DPR_MED_28_DCS',\n'DPR_MED_29_DCS',\n'DPR_MED_30_DCS',\n'DPR_MED_31_DCS',\n'DPR_MED_32_DCS',\n'DPR_MED_33_DCS',\n'DPR_MED_34_DCS',\n'DPR_MED_35_DCS',\n'DPR_MED_36_DCS',\n'DPR_MED_37_DCS',\n'DPR_MED_38_DCS',\n'DPR_MED_39_DCS',\n'DPR_MED_40_DCS',\n'DPR_OTHMD_DCS',\n'DPR_EVRMED_DCS'],\n'HBP':[\n'CCC_HBP_DCS',\n'HBP_AGE_DCS',\n'HBP_PRG_DCS',\n'HBP_OTPRG_DCS',\n'HBP_MED_DCS',\n'HBP_MEDNAME_DCS',\n'HBP_MED_1_DCS',\n'HBP_MED_2_DCS',\n'HBP_MED_3_DCS',\n'HBP_MED_4_DCS',\n'HBP_MED_5_DCS',\n'HBP_MED_6_DCS',\n'HBP_MED_7_DCS',\n'HBP_MED_8_DCS',\n'HBP_MED_9_DCS',\n'HBP_MED_10_DCS',\n'HBP_MED_11_DCS',\n'HBP_MED_12_DCS',\n'HBP_MED_13_DCS',\n'HBP_MED_14_DCS',\n'HBP_MED_15_DCS',\n'HBP_MED_16_DCS',\n'HBP_MED_17_DCS',\n'HBP_MED_18_DCS',\n'HBP_MED_19_DCS',\n'HBP_MED_20_DCS',\n'HBP_MED_21_DCS',\n'HBP_MED_22_DCS',\n'HBP_MED_23_DCS',\n'HBP_MED_24_DCS',\n'HBP_MED_25_DCS',\n'HBP_MED_26_DCS',\n'HBP_MED_27_DCS',\n'HBP_MED_28_DCS',\n'HBP_MED_29_DCS',\n'HBP_MED_30_DCS',\n'HBP_MED_31_DCS',\n'HBP_MED_32_DCS',\n'HBP_MED_33_DCS',\n'HBP_MED_34_DCS',\n'HBP_MED_35_DCS',\n'HBP_MED_36_DCS',\n'HBP_MED_37_DCS',\n'HBP_MED_38_DCS',\n'HBP_MED_39_DCS',\n'HBP_MED_40_DCS',\n'HBP_EVRMED_DCS',\n'HBP_TRT_DCS',\n'HBP_EVTRT_DCS'],\n'HYP':[\n'CCC_UTHYR_DCS',\n'HYP_UTHYRAGE_DCS',\n'HYP_UTHYRMED_DCS',\n'HYP_UTHYRMEDNAME_DCS',\n'HYP_UTHYRMED_1_DCS',\n'HYP_UTHYRMED_2_DCS',\n'HYP_UTHYRMED_3_DCS',\n'HYP_UTHYRMED_4_DCS',\n'HYP_UTHYRMED_5_DCS',\n'HYP_UTHYRMED_6_DCS',\n'HYP_UTHYRMED_7_DCS',\n'HYP_UTHYRMED_8_DCS',\n'HYP_UTHYRMED_9_DCS',\n'HYP_UTHYRMED_10_DCS',\n'HYP_UTHYRMED_11_DCS',\n'HYP_UTHYRMED_12_DCS',\n'HYP_UTHYRMED_13_DCS',\n'HYP_UTHYRMED_14_DCS',\n'HYP_UTHYRMED_15_DCS',\n'HYP_UTHYRMED_16_DCS',\n'HYP_UTHYRMED_17_DCS',\n'HYP_UTHYRMED_18_DCS',\n'HYP_UTHYRMED_19_DCS',\n'HYP_UTHYRMED_20_DCS',\n'HYP_UTHYRMED_21_DCS',\n'HYP_UTHYRMED_22_DCS',\n'HYP_UTHYRMED_23_DCS',\n'HYP_UTHYRMED_24_DCS',\n'HYP_UTHYRMED_25_DCS',\n'HYP_UTHYRMED_26_DCS',\n'HYP_UTHYRMED_27_DCS',\n'HYP_UTHYRMED_28_DCS',\n'HYP_UTHYRMED_29_DCS',\n'HYP_UTHYRMED_30_DCS',\n'HYP_UTHYRMED_31_DCS',\n'HYP_UTHYRMED_32_DCS',\n'HYP_UTHYRMED_33_DCS',\n'HYP_UTHYRMED_34_DCS',\n'HYP_UTHYRMED_35_DCS',\n'HYP_UTHYRMED_36_DCS',\n'HYP_UTHYRMED_37_DCS',\n'HYP_UTHYRMED_38_DCS',\n'HYP_UTHYRMED_39_DCS',\n'HYP_UTHYRMED_40_DCS',\n'HYP_UTHYREVRMED_DCS',\n'CCC_OTHYR_DCS',\n'HYP_OTHYRAGE_DCS',\n'HYP_OTHYRMED_DCS',\n'HYP_OTHYRMEDNAME_DCS',\n'HYP_OTHYRMED_1_DCS',\n'HYP_OTHYRMED_2_DCS',\n'HYP_OTHYRMED_3_DCS',\n'HYP_OTHYRMED_4_DCS',\n'HYP_OTHYRMED_5_DCS',\n'HYP_OTHYRMED_6_DCS',\n'HYP_OTHYRMED_7_DCS',\n'HYP_OTHYRMED_8_DCS',\n'HYP_OTHYRMED_9_DCS',\n'HYP_OTHYRMED_10_DCS',\n'HYP_OTHYRMED_11_DCS',\n'HYP_OTHYRMED_12_DCS',\n'HYP_OTHYRMED_13_DCS',\n'HYP_OTHYRMED_14_DCS',\n'HYP_OTHYRMED_15_DCS',\n'HYP_OTHYRMED_16_DCS',\n'HYP_OTHYRMED_17_DCS',\n'HYP_OTHYRMED_18_DCS',\n'HYP_OTHYRMED_19_DCS',\n'HYP_OTHYRMED_20_DCS',\n'HYP_OTHYRMED_21_DCS',\n'HYP_OTHYRMED_22_DCS',\n'HYP_OTHYRMED_23_DCS',\n'HYP_OTHYRMED_24_DCS',\n'HYP_OTHYRMED_25_DCS',\n'HYP_OTHYRMED_26_DCS',\n'HYP_OTHYRMED_27_DCS',\n'HYP_OTHYRMED_28_DCS',\n'HYP_OTHYRMED_29_DCS',\n'HYP_OTHYRMED_30_DCS',\n'HYP_OTHYRMED_31_DCS',\n'HYP_OTHYRMED_32_DCS',\n'HYP_OTHYRMED_33_DCS',\n'HYP_OTHYRMED_34_DCS',\n'HYP_OTHYRMED_35_DCS',\n'HYP_OTHYRMED_36_DCS',\n'HYP_OTHYRMED_37_DCS',\n'HYP_OTHYRMED_38_DCS',\n'HYP_OTHYRMED_39_DCS',\n'HYP_OTHYRMED_40_DCS',\n'HYP_OTHYREVRMD_DCS'],\n'IHD':[\n'CCC_ANGI_DCS',\n'IHD_ANGIAGE_DCS',\n'CCC_AMI_DCS',\n'IHD_AMIAGE_DCS',\n'IHD_CAB_DCS',\n'IHD_ANGIO_DCS',\n'IHD_BLOCK_DCS',\n'IHD_MED_DCS',\n'IHD_MEDNAME_DCS',\n'IHD_MED_1_DCS',\n'IHD_MED_2_DCS',\n'IHD_MED_3_DCS',\n'IHD_MED_4_DCS',\n'IHD_MED_5_DCS',\n'IHD_MED_6_DCS',\n'IHD_MED_7_DCS',\n'IHD_MED_8_DCS',\n'IHD_MED_9_DCS',\n'IHD_MED_10_DCS',\n'IHD_MED_11_DCS',\n'IHD_MED_12_DCS',\n'IHD_MED_13_DCS',\n'IHD_MED_14_DCS',\n'IHD_MED_15_DCS',\n'IHD_MED_16_DCS',\n'IHD_MED_17_DCS',\n'IHD_MED_18_DCS',\n'IHD_MED_19_DCS',\n'IHD_MED_20_DCS',\n'IHD_MED_21_DCS',\n'IHD_MED_22_DCS',\n'IHD_MED_23_DCS',\n'IHD_MED_24_DCS',\n'IHD_MED_25_DCS',\n'IHD_MED_26_DCS',\n'IHD_MED_27_DCS',\n'IHD_MED_28_DCS',\n'IHD_MED_29_DCS',\n'IHD_MED_30_DCS',\n'IHD_MED_31_DCS',\n'IHD_MED_32_DCS',\n'IHD_MED_33_DCS',\n'IHD_MED_34_DCS',\n'IHD_MED_35_DCS',\n'IHD_MED_36_DCS',\n'IHD_MED_37_DCS',\n'IHD_MED_38_DCS',\n'IHD_MED_39_DCS',\n'IHD_MED_40_DCS',\n'IHD_EVRMED_DCS'],\n'OAR':[\n'CCC_RA_DCS',\n'CCC_ARTOT_DCS',\n'OAR_AGE_DCS',\n'OAR_MED_DCS',\n'OAR_MEDOT_DCS'],\n'OSA':[\n'CCC_OAHAND_DCS',\n'OSA_AGE_DCS',\n'OSA_LGJNT_DCS',\n'OSA_NBFNG_DCS',\n'OSA_PAINJNT_DCS',\n'OSA_LGTMB_DCS',\n'OSA_PAINTMB_DCS'],\n'OSH':[\n'CCC_OAHIP_DCS',\n'OSH_AGE_DCS',\n'OSH_HIPRPL_DCS',\n'OSH_FRAC_DCS',\n'OSH_PAIN_DCS',\n'OSH_PAINSL_DCS',\n'OSH_LOM_DCS'],\n'OSK':[\n'CCC_OAKNEE_DCS',\n'OSK_AGE_DCS',\n'OSK_KNERPL_DCS',\n'OSK_PAIN_DCS',\n'OSK_PAINSL_DCS',\n'OSK_SWELL_DCS'],\n'OST':[\n'CCC_OSTPO_DCS',\n'OST_AGE_DCS',\n'OST_MED_DCS',\n'OST_MEDNAME_DCS',\n'OST_MED_1_DCS',\n'OST_MED_2_DCS',\n'OST_MED_3_DCS',\n'OST_MED_4_DCS',\n'OST_MED_5_DCS',\n'OST_MED_6_DCS',\n'OST_MED_7_DCS',\n'OST_MED_8_DCS',\n'OST_MED_9_DCS',\n'OST_MED_10_DCS',\n'OST_MED_11_DCS',\n'OST_MED_12_DCS',\n'OST_MED_13_DCS',\n'OST_MED_14_DCS',\n'OST_MED_15_DCS',\n'OST_MED_16_DCS',\n'OST_MED_17_DCS',\n'OST_MED_18_DCS',\n'OST_MED_19_DCS',\n'OST_MED_20_DCS',\n'OST_MED_21_DCS',\n'OST_MED_22_DCS',\n'OST_MED_23_DCS',\n'OST_MED_24_DCS',\n'OST_MED_25_DCS',\n'OST_MED_26_DCS',\n'OST_MED_27_DCS',\n'OST_MED_28_DCS',\n'OST_MED_29_DCS',\n'OST_MED_30_DCS',\n'OST_MED_31_DCS',\n'OST_MED_32_DCS',\n'OST_MED_33_DCS',\n'OST_MED_34_DCS',\n'OST_MED_35_DCS',\n'OST_MED_36_DCS',\n'OST_MED_37_DCS',\n'OST_MED_38_DCS',\n'OST_MED_39_DCS',\n'OST_MED_40_DCS',\n'OST_EVRMD_DCS',\n'OST_BONE_DCS',\n'OST_FRAC_DCS',\n'OST_MOM_DCS',\n'OST_DAD_DCS',\n'OST_HGT_DCS',\n'OST_CST_DCS',\n'OST_CSTAGE_DCS',\n'OST_CST_MT_DCS',\n'OST_BP_DCS',\n'OST_BP_DUR_DCS',\n'OST_BCKPPM_DCS',\n'OST_BCKPLOC_DCS'],\n'PKD':[\n'CCC_PARK_DCS',\n'PKD_AGE_DCS',\n'PKD_MED_DCS',\n'PKD_MEDNAME_DCS',\n'PKD_MED_1_DCS',\n'PKD_MED_2_DCS',\n'PKD_MED_3_DCS',\n'PKD_MED_4_DCS',\n'PKD_MED_5_DCS',\n'PKD_MED_6_DCS',\n'PKD_MED_7_DCS',\n'PKD_MED_8_DCS',\n'PKD_MED_9_DCS',\n'PKD_MED_10_DCS',\n'PKD_MED_11_DCS',\n'PKD_MED_12_DCS',\n'PKD_MED_13_DCS',\n'PKD_MED_14_DCS',\n'PKD_MED_15_DCS',\n'PKD_MED_16_DCS',\n'PKD_MED_17_DCS',\n'PKD_MED_18_DCS',\n'PKD_MED_19_DCS',\n'PKD_MED_20_DCS',\n'PKD_MED_21_DCS',\n'PKD_MED_22_DCS',\n'PKD_MED_23_DCS',\n'PKD_MED_24_DCS',\n'PKD_MED_25_DCS',\n'PKD_MED_26_DCS',\n'PKD_MED_27_DCS',\n'PKD_MED_28_DCS',\n'PKD_MED_29_DCS',\n'PKD_MED_30_DCS',\n'PKD_MED_31_DCS',\n'PKD_MED_32_DCS',\n'PKD_MED_33_DCS',\n'PKD_MED_34_DCS',\n'PKD_MED_35_DCS',\n'PKD_MED_36_DCS',\n'PKD_MED_37_DCS',\n'PKD_MED_38_DCS',\n'PKD_MED_39_DCS',\n'PKD_MED_40_DCS',\n'PKD_OTHMD_DCS',\n'PKD_EVRMED_DCS',\n'PKD_SHKE_DCS',\n'PKD_SHKSEV_DCS',\n'PKD_SMWRT_DCS',\n'PKD_BUTON_DCS',\n'PKD_VOICE_DCS',\n'PKD_FEET_DCS',\n'PKD_WALK_DCS',\n'PKD_BAL_DCS',\n'PKD_FACE_DCS',\n'PKD_RISE_DCS'],\n'ROS':[\n'ROS_PAIN_DCS',\n'ROS_HILL_DCS',\n'ROS_LEVEL_DCS',\n'ROS_BLOCK_DCS',\n'ROS_DOWLK_DCS',\n'ROS_STILL_DCS',\n'ROS_SOON_DCS',\n'ROS_LOC_DCS',\n'ROS_SEVPAIN_DCS'],\n'STR':[\n'CCC_CVA_DCS',\n'STR_CVAAGE_DCS',\n'STR_MED_DCS',\n'STR_MEDNAME_DCS',\n'STR_MED_1_DCS',\n'STR_MED_2_DCS',\n'STR_MED_3_DCS',\n'STR_MED_4_DCS',\n'STR_MED_5_DCS',\n'STR_MED_6_DCS',\n'STR_MED_7_DCS',\n'STR_MED_8_DCS',\n'STR_MED_9_DCS',\n'STR_MED_10_DCS',\n'STR_MED_11_DCS',\n'STR_MED_12_DCS',\n'STR_MED_13_DCS',\n'STR_MED_14_DCS',\n'STR_MED_15_DCS',\n'STR_MED_16_DCS',\n'STR_MED_17_DCS',\n'STR_MED_18_DCS',\n'STR_MED_19_DCS',\n'STR_MED_20_DCS',\n'STR_MED_21_DCS',\n'STR_MED_22_DCS',\n'STR_MED_23_DCS',\n'STR_MED_24_DCS',\n'STR_MED_25_DCS',\n'STR_MED_26_DCS',\n'STR_MED_27_DCS',\n'STR_MED_28_DCS',\n'STR_MED_29_DCS',\n'STR_MED_30_DCS',\n'STR_MED_31_DCS',\n'STR_MED_32_DCS',\n'STR_MED_33_DCS',\n'STR_MED_34_DCS',\n'STR_MED_35_DCS',\n'STR_MED_36_DCS',\n'STR_MED_37_DCS',\n'STR_MED_38_DCS',\n'STR_MED_39_DCS',\n'STR_MED_40_DCS',\n'STR_OTHMD_DCS',\n'STR_EVRMD_DCS',\n'CCC_TIA_DCS',\n'STR_TIAAGE_DCS',\n'STR_TIAMED_DCS',\n'STR_TIAMEDNAME_DCS',\n'STR_TIAMED_1_DCS',\n'STR_TIAMED_2_DCS',\n'STR_TIAMED_3_DCS',\n'STR_TIAMED_4_DCS',\n'STR_TIAMED_5_DCS',\n'STR_TIAMED_6_DCS',\n'STR_TIAMED_7_DCS',\n'STR_TIAMED_8_DCS',\n'STR_TIAMED_9_DCS',\n'STR_TIAMED_10_DCS',\n'STR_TIAMED_11_DCS',\n'STR_TIAMED_12_DCS',\n'STR_TIAMED_13_DCS',\n'STR_TIAMED_14_DCS',\n'STR_TIAMED_15_DCS',\n'STR_TIAMED_16_DCS',\n'STR_TIAMED_17_DCS',\n'STR_TIAMED_18_DCS',\n'STR_TIAMED_19_DCS',\n'STR_TIAMED_20_DCS',\n'STR_TIAMED_21_DCS',\n'STR_TIAMED_22_DCS',\n'STR_TIAMED_23_DCS',\n'STR_TIAMED_24_DCS',\n'STR_TIAMED_25_DCS',\n'STR_TIAMED_26_DCS',\n'STR_TIAMED_27_DCS',\n'STR_TIAMED_28_DCS',\n'STR_TIAMED_29_DCS',\n'STR_TIAMED_30_DCS',\n'STR_TIAMED_31_DCS',\n'STR_TIAMED_32_DCS',\n'STR_TIAMED_33_DCS',\n'STR_TIAMED_34_DCS',\n'STR_TIAMED_35_DCS',\n'STR_TIAMED_36_DCS',\n'STR_TIAMED_37_DCS',\n'STR_TIAMED_38_DCS',\n'STR_TIAMED_39_DCS',\n'STR_TIAMED_40_DCS',\n'STR_TIAOTHMD_DCS',\n'STR_TIAEVMD_DCS',\n'CCC_CVAFX_DCS',\n'STR_WEAK_DCS',\n'STR_WEAK_DUR_DCS',\n'STR_NUMB_DCS',\n'STR_NUMB_DUR_DCS',\n'STR_VIS_DCS',\n'STR_VIS_DUR_DCS',\n'STR_NOVIS_DCS',\n'STR_NOVIS_DUR_DCS',\n'STR_NOUND_DCS',\n'STR_NOUND_DUR_DCS',\n'STR_NOEXP_DCS',\n'STR_NOEXP_DUR_DCS'],\n'TBI':[\n'TBI_TYP_DCS',\n'TBI_NMBR_DCS',\n'TBI_RSLT_DCS',\n'TBI_MCR_DCS',\n'TBI_PROB_DCS']\n}\n\nvar str = []\nfor(var key in sections) {\n  var rcount = 0\n  var qcount = 0\n  var arr = sections[key]\n  for(var i = 0; i < arr.length; i++) {\n    var j = $(stage + arr[i])\n    if(j.isNull().value()) {\n      continue\n    }  \n    qcount++\n    rcount += j.any('REFUSED').value() ? 1 : 0\n  }\n  if(0 == qcount) {\n    str.push(null)\n  } else {\n    str.push(100.0*rcount/qcount)\n  }\n}\nnewSequence(str, 'decimal')"}],"unit": "","index": 0,"referencedEntityType": ""}]}}