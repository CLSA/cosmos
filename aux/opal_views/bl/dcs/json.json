{"from": ["clsa-dcs.Participants"],"name": "QC_BL_json","datasourceName": "cosmos_dcs","Magma.VariableListViewDto.view": {"variables": [{"name": "data","entityType": "Participant","valueType": "text","mimeType": "","isRepeatable": false,"attributes": [{"name": "script","value": "var prj = 'cosmos_dcs.QC_BL_'\n\nvar qnaire_arr = ['technician','contraindicated','comment','duration','missing','qnaire_complete','skip','module_duration']\nvar trial_arr = ['technician','contraindicated','comment','duration','missing','skip','trial_count']\nvar file_arr = ['technician','contraindicated','comment','duration','missing','skip','file_size']\n\nvar view_list = {\n  'interview':\n    ['barcode','start_date','site','duration','stage_duration','type'],\n  'blood':qnaire_arr,\n  'blood_pressure':trial_arr,    \n  'carotid_intima':\n    ['technician','contraindicated','comment','duration','missing','skip','file_complete','file_size'],\n  'chair_rise':\n    ['technician','contraindicated','comment','duration','missing','skip','time','time_congruency'],     \n  'cognitive_test':file_arr,\n  'contraindication_qnaire':qnaire_arr,\n  'dexa':\n    ['technician','contraindicated','duration','missing','file_complete','file_size'],\n  'dexa_qnaire':qnaire_arr,    \n  'dexa_whole_body':\n    ['technician','contraindicated','comment','duration','missing','skip','file_size','scale_congruency'],    \n  'dexa_lateral':file_arr,\n  'dexa_forearm':file_arr,\n  'dexa_hip':\n    ['technician','contraindicated','comment','duration','missing','skip','file_complete','file_size'],\n  'disease_qnaire':qnaire_arr,\n  'ecg':\n    ['technician','contraindicated','comment','duration','missing','skip','intrinsic_poor_quality','file_size'],\n  'event_pmt':qnaire_arr,    \n  'functional_status':qnaire_arr,    \n  'grip_strength':trial_arr,\n  'hearing':\n    ['technician','contraindicated','comment','duration','missing','skip','frequency_complete','frequency_error'],    \n  'hearing_qnaire':\n    ['technician','contraindicated','comment','duration','missing','qnaire_complete','skip'],\n  'hips_waist':\n    ['technician','contraindicated','comment','duration','missing','skip','ratio'],\n  'neuro_scoring':\n    ['technician','contraindicated','comment','duration','missing','qnaire_complete','skip','recording_quality'],\n  'retinal_scan':\n    ['technician','contraindicated','comment','duration','missing','skip','file_complete','file_size'],    \n  'sitting_height':\n    ['technician','contraindicated','comment','duration','missing','skip','trial_count','standard_deviation'],      \n  'spirometry':\n    ['technician','contraindicated','comment','duration','missing','skip','grade','file_complete','file_size'],    \n  'standing_balance':\n    ['technician','contraindicated','comment','duration','missing','qnaire_complete','skip','module_duration','time'],\n  'standing_height':\n    ['technician','contraindicated','comment','duration','missing','skip','trial_count','standard_deviation'],    \n  'stroop_fas':\n    ['technician','contraindicated','comment','duration','missing','qnaire_complete','skip','module_duration','file_complete','file_size'],    \n  'time_based_pmt':qnaire_arr,\n  'tonometer':\n    ['technician','contraindicated','comment','duration','missing','skip','quality_index_complete','quality_index'],    \n  'tug':\n    ['technician','contraindicated','comment','duration','missing','skip','time','time_congruency'],    \n  'urine':qnaire_arr,\n  'vision_acuity':qnaire_arr,\n  'walk':\n    ['technician','contraindicated','comment','duration','missing','skip','time','time_congruency'],\n  'weight':\n    ['technician','contraindicated','comment','duration','missing','skip','trial_count','standard_deviation']  \n}\n\nvar inter_str = null\nvar stage_str = []\nfor( var key in view_list ) {  \n  var var_str = prj + key + ':'\n  var var_arr = view_list[key]  \n  key_str = []\n  for(var i=0;i<var_arr.length;i++) {\n    var var_i = var_arr[i]\n    var v = $(var_str + var_i)\n    if(v.isNull().value()) continue;    \n    if('module_duration'==var_i || 'file_size'==var_i || 'quality_index'==var_i || 'frequency_error'==var_i) {  \n      key_str.push('\"' + var_i + '\":' + v.value())\n    } else {\n      if(v.type().eq('text').and('comment'!=var_i).value()) {\n        key_str.push('\"' + var_i + '\":\"' + v.value() + '\"')\n      } else {\n        key_str.push('\"' + var_i + '\":' + v.value())\n      }  \n    }\n  }\n  if('interview'==key) {\n    inter_str = '{' + key_str.join(',') + ',\"stages\":{'\n  } else {\n    stage_str.push( '\"' + key + '\":{' + key_str.join(',') + '}')\n  }    \n}\n\nnewValue( inter_str + stage_str.join(',') +'}}','text')"}],"unit": "","index": 0,"referencedEntityType": ""}]}}