<org.obiba.magma.views.View>
  <name>QC_F2_retinal_scan</name>
  <from class="org.obiba.magma.views.JoinTable">
    <list>
      <table inner="false" class="org.obiba.magma.support.ValueTableReference">
        <reference>clsa-dcs-f2.Participants</reference>
      </table>
      <table inner="false" class="org.obiba.magma.support.ValueTableReference">
        <reference>clsa-dcs-images-f2.RetinalScanLeft</reference>
      </table>
      <table inner="false" class="org.obiba.magma.support.ValueTableReference">
        <reference>clsa-dcs-images-f2.RetinalScanRight</reference>
      </table>
    </list>
  </from>
  <select class="org.obiba.magma.views.support.NoneClause"/>
  <where class="org.obiba.magma.js.views.JavascriptClause">
    <scriptName>customScript</scriptName>
    <script>$(&apos;clsa-dcs-f2.Participants:DCSatHOME&apos;).not().whenNull(true).and($(&apos;clsa-dcs-f2.Participants:DCS_PHONE&apos;).not().whenNull(true))</script>
  </where>
  <variables class="org.obiba.magma.js.views.VariablesClause">
    <variables class="linked-hash-set">
      <variable name="technician" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">var list = [&apos;RetinalScanLeft&apos;,&apos;RetinalScanRight&apos;]
var res = null
for(var i=0; i&lt;list.length; i++) {
  var str = $(&apos;clsa-dcs-images-f2.&apos;+list[i]+&apos;:InstrumentRun.user&apos;).whenNull(
    $group(&apos;Admin.Action.stage&apos;,list[i],&apos;Admin.Action.user&apos;).asSequence().last()).lowerCase()
  if(str.isNull().not().value()) {
    var v = str.value()
    if(0&lt;v.length) {
      res = newValue(v)
      break
    }  
  }  
}
res</attribute>
        </attributes>
      </variable>
      <variable name="skip" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0"/>
      <variable name="contraindicated" valueType="boolean" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">$(&apos;cosmos_dcs.QC_F2_retinal_scan_left:contraindicated&apos;).and(
  $(&apos;cosmos_dcs.QC_F2_retinal_scan_right:contraindicated&apos;))</attribute>
        </attributes>
      </variable>
      <variable name="missing" valueType="boolean" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0"/>
      <variable name="duration" valueType="integer" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">$(&apos;cosmos_dcs.QC_F2_retinal_scan_left:duration&apos;).plus(
  $(&apos;cosmos_dcs.QC_F2_retinal_scan_right:duration&apos;))</attribute>
        </attributes>
      </variable>
      <variable name="file_name" valueType="text" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0" repeatable="true" occurrenceGroup="">
        <attributes>
          <attribute name="script" valueType="text">newSequence([&apos;retinal_scan_left&apos;,&apos;retinal_scan_right&apos;])</attribute>
        </attributes>
      </variable>
      <variable name="file_size" valueType="integer" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0" repeatable="true" occurrenceGroup="">
        <attributes>
          <attribute name="script" valueType="text">newSequence([$(&apos;cosmos_dcs.QC_F2_retinal_scan_left:file_size&apos;),$(&apos;cosmos_dcs.QC_F2_retinal_scan_right:file_size&apos;)],&apos;integer&apos;)</attribute>
        </attributes>
      </variable>
      <variable name="file_complete" valueType="decimal" entityType="Participant" unit="" mimeType="" referencedEntityType="" index="0">
        <attributes>
          <attribute name="script" valueType="text">$this(&apos;file_size&apos;).trimmer().size().div($this(&apos;file_name&apos;).size()).multiply(100)</attribute>
        </attributes>
      </variable>
    </variables>
  </variables>
  <created valueType="datetime">2019-04-30T11:00:12.549-04</created>
  <updated valueType="datetime">2019-05-07T15:40:48.349-04</updated>
</org.obiba.magma.views.View>