{"from": ["clsa-dcs-f2.Participants"],"name": "QC_F2_json","datasourceName": "cosmos_dcs","Magma.VariableListViewDto.view": {"variables": [{"name": "data","entityType": "Participant","valueType": "text","mimeType": "","isRepeatable": false,"attributes": [{"name": "script","value": "var prj = 'cosmos_dcs.QC_F2_'\nvar qnaire_arr = ['technician','contraindicated','comment','duration','missing','qnaire_complete','skip','module_duration']\nvar trial_arr = ['technician','contraindicated','comment','duration','missing','skip','trial_count']\nvar file_arr = ['technician','contraindicated','comment','duration','missing','skip','file_size']\n\nvar view_list = {}\nview_list['interview']=\n    ['barcode','start_date','site','duration','stage_duration','type']\nview_list['contraindication_qnaire']=qnaire_arr\nview_list['disease_qnaire']=qnaire_arr\nview_list['general_health']=qnaire_arr\nview_list['social_network']=qnaire_arr\n\nif($(prj+'interview:type').eq('dcs phone').value()) {\n  view_list['height_weight']=['technician','contraindicated','comment','duration','missing','skip','height_change']\n  view_list['os']=qnaire_arr\n} else if($(prj+'interview:type').eq('dcs home').value()) {\n  view_list['blood_pressure']=trial_arr\n  view_list['body_composition']=\n    ['technician','contraindicated','comment','duration','missing','qnaire_complete','skip','module_duration','trial_count','standard_deviation']\n  view_list['event_pmt']=qnaire_arr\n  view_list['grip_strength']=trial_arr    \n  view_list['hips_waist']=\n    ['technician','contraindicated','comment','duration','missing','skip','ratio']\n  view_list['neuro_scoring']=\n    ['technician','contraindicated','comment','duration','missing','qnaire_complete','skip','recording_quality']\n  view_list['os']=qnaire_arr\n  view_list['spirometry']=\n    ['technician','contraindicated','comment','duration','missing','skip','grade','file_complete','file_size']\n  view_list['standing_height']=\n    ['technician','contraindicated','comment','duration','missing','skip','trial_count','standard_deviation','height_change']\n  view_list['stroop_fas']=\n    ['technician','contraindicated','comment','duration','missing','qnaire_complete','skip','module_duration','file_complete','file_size']\n  view_list['time_based_pmt']=qnaire_arr\n} else {\n  view_list['blood']=qnaire_arr\n  view_list['blood_pressure']=trial_arr\n  view_list['cdtt']=\n    ['technician','contraindicated','comment','duration','missing','skip','file_size','standard_deviation','speech_recognition_threshold','reversal_number']\n  view_list['carotid_intima']=\n    ['technician','contraindicated','comment','duration','missing','skip','file_complete','file_size']\n  view_list['chair_rise']=\n    ['technician','contraindicated','comment','duration','missing','skip','time','time_congruency']   \n  view_list['cognitive_test']=file_arr\n  view_list['deviation_aecrf']=\n    ['technician','contraindicated','comment','duration','missing','qnaire_complete','skip','module_duration','adverse_event','followup_event','deviation_count']\n  view_list['dexa']=\n    ['technician','contraindicated','duration','missing','file_complete','file_size']\n  view_list['dexa_qnaire']=qnaire_arr\n  view_list['dexa_whole_body']=\n    ['technician','contraindicated','comment','duration','missing','skip','file_size','scale_congruency']\n  view_list['dexa_lateral']=file_arr\n  view_list['dexa_forearm']=file_arr\n  view_list['dexa_hip']=\n    ['technician','contraindicated','comment','duration','missing','skip','file_complete','file_size']\n  view_list['dexa_spine']=file_arr\n  view_list['ecg']=\n    ['technician','contraindicated','comment','duration','missing','skip','intrinsic_poor_quality','file_size']\n  view_list['event_pmt']=qnaire_arr\n  view_list['frax']=file_arr\n  view_list['grip_strength']=trial_arr\n  view_list['hearing']=\n    ['technician','contraindicated','comment','duration','missing','skip','frequency_complete','frequency_error']\n  view_list['hearing_qnaire']=\n    ['technician','contraindicated','comment','duration','missing','qnaire_complete','skip']\n  view_list['hips_waist']=\n    ['technician','contraindicated','comment','duration','missing','skip','ratio']\n  view_list['inhome_qa']=qnaire_arr\n  view_list['neuro_scoring']=\n    ['technician','contraindicated','comment','duration','missing','qnaire_complete','skip','recording_quality']\n  view_list['osipv']=qnaire_arr\n  view_list['retinal_scan_left']=file_arr\n  view_list['retinal_scan_right']=file_arr\n  view_list['sitting_height']=\n    ['technician','contraindicated','comment','duration','missing','skip','trial_count','standard_deviation','height_change']\n  view_list['spirometry']=\n    ['technician','contraindicated','comment','duration','missing','skip','grade','file_complete','file_size']\n  view_list['standing_balance']=\n    ['technician','contraindicated','comment','duration','missing','qnaire_complete','skip','module_duration','time']\n  view_list['standing_height']=\n    ['technician','contraindicated','comment','duration','missing','skip','trial_count','standard_deviation','height_change']\n  view_list['stroop_fas']=\n    ['technician','contraindicated','comment','duration','missing','qnaire_complete','skip','module_duration','file_complete','file_size']\n  view_list['time_based_pmt']=qnaire_arr\n  view_list['tonometer']=\n    ['technician','contraindicated','comment','duration','missing','skip','quality_index_complete','quality_index']\n  view_list['tug']=\n    ['technician','contraindicated','comment','duration','missing','skip','time','time_congruency']\n  view_list['urine']=qnaire_arr\n  view_list['vision_acuity']=qnaire_arr\n  view_list['walk']=\n    ['technician','contraindicated','comment','duration','missing','skip','time','time_congruency']\n  view_list['weight']=\n    ['technician','contraindicated','comment','duration','missing','skip','trial_count','standard_deviation']    \n}\n\n\nvar inter_str = null\nvar stage_str = []\nfor( var key in view_list ) {  \n  var var_str = prj + key + ':'\n  var var_arr = view_list[key]  \n  key_str = []\n  for(var i=0;i<var_arr.length;i++) {\n    var var_i = var_arr[i]\n    var v = $(var_str + var_i)\n    if(v.isNull().value()) continue;    \n    if('module_duration'==var_i || 'file_size'==var_i || 'quality_index'==var_i \n      || 'frequency_error'==var_i || 'adverse_event'==var_i || 'followup_event'==var_i || 'deviation_count'==var_i) {  \n      key_str.push('\"' + var_i + '\":' + v.value())\n    } else {\n      if(v.type().eq('text').and('comment'!=var_i).value()) {\n        key_str.push('\"' + var_i + '\":\"' + v.value() + '\"')\n      } else {\n        key_str.push('\"' + var_i + '\":' + v.value())\n      }  \n    }\n  }\n  if('interview'==key) {\n    inter_str = '{' + key_str.join(',') + ',\"stages\":{'\n  } else {\n    stage_str.push( '\"' + key + '\":{' + key_str.join(',') + '}')\n  }    \n}\n\nnewValue( inter_str + stage_str.join(',') +'}}','text')"}],"unit": "","index": 0,"referencedEntityType": ""}]}}