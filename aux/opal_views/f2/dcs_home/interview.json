{"from": ["clsa-dcs-f2.Participants","clsa-dcs-f2.BloodPressure","clsa-dcs-f2.ContraIndications","clsa-dcs-f2.DiseaseSymptoms","clsa-dcs-f2.EventPMT","clsa-dcs-f2.GenHealth","clsa-dcs-f2.GripStrength","clsa-dcs-f2.HipsWaist","clsa-dcs-f2.NeuropsychologicalBatteryScoring","clsa-dcs-f2.OS","clsa-dcs-f2.SocialNetwork","clsa-dcs-f2.Spirometry","clsa-dcs-f2.StandingHeight","clsa-dcs-f2.StroopFAS","clsa-dcs-f2.TimeBasedProspectiveMemoryTask","clsa-dcs-f2.ExtendedHIN","clsa-dcs-f2.GeneralProxy","clsa-dcs-f2.ConclusionQuestionnaire"],"name": "QC_F2_interview","datasourceName": "cosmos_dcs_home","where": "$('clsa-dcs-f2.Participants:DCSatHOME')","Magma.VariableListViewDto.view": {"variables": [{"name": "barcode","entityType": "Participant","valueType": "text","mimeType": "","isRepeatable": false,"attributes": [{"name": "script","value": "$('Admin.Participant.barcode')"}],"unit": "","index": 0,"referencedEntityType": ""},{"name": "start_date","entityType": "Participant","valueType": "date","mimeType": "","isRepeatable": false,"attributes": [{"name": "script","value": "$('Admin.Interview.startDate')"}],"unit": "","index": 0,"referencedEntityType": ""},{"name": "site","entityType": "Participant","valueType": "text","mimeType": "","isRepeatable": false,"attributes": [{"name": "script","value": "$('Admin.ApplicationConfiguration.siteName').lowerCase().map({\n  'britishcolumbia':'University of BC DCS',\n  'british columbia':'University of BC DCS',\n  'calgary':'Calgary DCS',\n  'dalhousie':'Dalhousie DCS',\n  'hamilton':'Hamilton DCS',\n  'hamiltonhome1':'Hamilton DCS',\n  'himilton':'Hamilton DCS',\n  'manitoba':'Manitoba DCS',\n  'mcgill':'McGill DCS',\n  'mcmaster':'Hamilton DCS',\n  'memorial':'Memorial DCS',\n  'memorial university':'Memorial DCS',\n  'ottawa':'Ottawa DCS',\n  'sherbrooke':'Sherbrooke DCS',\n  'simon fraser':'Simon Fraser DCS',\n  'simonfraser':'Simon Fraser DCS',\n  'universityofbc':'University of BC DCS',\n  'university of manitoba':'Manitoba DCS',\n  'university of victoria':'Victoria DCS',\n  'victoria':'Victoria DCS'},null)"}],"unit": "","index": 0,"referencedEntityType": ""},{"name": "duration","entityType": "Participant","valueType": "integer","mimeType": "","isRepeatable": false,"attributes": [{"name": "script","value": "var res = null\nvar te = $('clsa-dcs-f2.Participants:Admin.Participant.captureEndDate').time()\nvar tb = $('clsa-dcs-f2.Participants:Admin.Participant.captureStartDate').time()\nif(te.isNull().not().and(tb.isNull().not()).value()) {\n res = te.minus(tb).div(1000)\n if(res.eq(0).value()) res = null\n}\nres"}],"unit": "","index": 0,"referencedEntityType": ""},{"name": "stage_duration","entityType": "Participant","valueType": "integer","mimeType": "","isRepeatable": false,"attributes": [{"name": "script","value": "var res = null\nvar stages = $('clsa-dcs-f2.Participants:Admin.StageInstance.stage').asSequence()\nvar unique = stages.filter(function(v,i) {\n    return i==this.indexOf(v)\n  })\nvar t = newValue(0,'integer')\nfor(var i = 0; i < unique.size(); i++) {\n  var stage = unique.valueAt(i).value()\n  var v = $group(\n      'clsa-dcs-f2.Participants:Admin.StageInstance.stage',\n      stage,\n      'Admin.StageInstance.duration').asSequence().filter(function(v) {\n        return v.ge(0)\n      })\n  if(null == v) continue\n  t = t.plus(v.sum())\n}\n\nif(t.gt(0).value()) {\n  res = t\n}\nres"}],"unit": "","index": 0,"referencedEntityType": ""}]}}