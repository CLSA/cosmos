{"from": ["clsa-dcs-f1.Participants"],"name": "QC_F1_json","datasourceName": "cosmos_dcs_home","where": "$('clsa-dcs-f1.Participants:DCSatHOME')","Magma.VariableListViewDto.view": {"variables": [{"name": "data","entityType": "Participant","valueType": "text","mimeType": "","isRepeatable": false,"attributes": [{"name": "script","value": "var prj = 'cosmos_dcs_home.QC_F1_'\n\nvar view_list = {\n  'interview':\n    ['barcode','start_date','site','duration','stage_duration'],\n  'blood_pressure':\n    ['technician','contraindicated','comment','duration','missing','skip','trial_count'],\n  'body_composition':\n    ['technician','contraindicated','comment','duration','missing','qnaire_complete','skip','module_duration','trial_count','standard_deviation'],\n  'contraindication_qnaire':\n    ['technician','contraindicated','comment','duration','missing','qnaire_complete','skip','module_duration'],    \n  'disease_qnaire':\n    ['technician','contraindicated','comment','duration','missing','qnaire_complete','skip','module_duration'],\n  'event_pmt':\n    ['technician','contraindicated','comment','duration','missing','qnaire_complete','skip','module_duration'],    \n  'functional_status':\n    ['technician','contraindicated','comment','duration','missing','qnaire_complete','skip','module_duration'],\n  'general_health':\n    ['technician','contraindicated','comment','duration','missing','qnaire_complete','skip','module_duration'],\n  'grip_strength':\n    ['technician','contraindicated','comment','duration','missing','skip','trial_count'],\n  'hips_waist':\n    ['technician','contraindicated','comment','duration','missing','skip','ratio'],\n  'neuro_scoring':\n    ['technician','contraindicated','comment','duration','missing','qnaire_complete','skip','recording_quality'],\n  'osonly':\n    ['technician','contraindicated','comment','duration','missing','qnaire_complete','skip','module_duration'],\n  'spirometry':\n    ['technician','contraindicated','comment','duration','missing','skip','grade','file_complete','file_size'],\n  'standing_height':\n    ['technician','contraindicated','comment','duration','missing','skip','trial_count','standard_deviation','height_change'],    \n  'stroop_fas':\n    ['technician','contraindicated','comment','duration','missing','qnaire_complete','skip','module_duration','file_complete','file_size'],    \n  'time_based_pmt':\n    ['technician','contraindicated','comment','duration','missing','qnaire_complete','skip','module_duration']\n}\n\nvar inter_str = null\nvar stage_str = []\nfor( var key in view_list ) {  \n  var var_str = prj + key + ':'\n  var var_arr = view_list[key]  \n  key_str = []\n  for(var i=0;i<var_arr.length;i++) {\n    var var_i = var_arr[i]\n    var v = $(var_str + var_i)\n    if(v.isNull().value()) continue;    \n    if('module_duration'==var_i || 'file_size'==var_i) {  \n      key_str.push('\"' + var_i + '\":' + v.value())\n    } else {\n      if(v.type().eq('text').and('comment'!=var_i).value()) {\n        key_str.push('\"' + var_i + '\":\"' + v.value() + '\"')\n      } else {\n        key_str.push('\"' + var_i + '\":' + v.value())\n      }  \n    }\n  }\n  if('interview'==key) {\n    inter_str = '{' + key_str.join(',') + ',\"stages\":{'\n  } else {\n    stage_str.push( '\"' + key + '\":{' + key_str.join(',') + '}')\n  }    \n}\n\nnewValue( inter_str + stage_str.join(',') +'}}','text')"}],"unit": "","index": 0,"referencedEntityType": ""}]}}