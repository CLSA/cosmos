{"from": ["clsa-dcs-f1.Participants","clsa-dcs-f1.DiseaseSymptoms"],"name": "QC_F1_disease_qnaire","datasourceName": "cosmos_dcs_home","where": "$('clsa-dcs-f1.Participants:DCSatHOME')","Magma.VariableListViewDto.view": {"variables": [{"name": "technician","entityType": "Participant","valueType": "text","mimeType": "","isRepeatable": false,"attributes": [{"name": "script","value": "$('clsa-dcs-f1.DiseaseSymptoms:QuestionnaireRun.user').whenNull(\n  $group('Admin.Action.stage','DiseaseSymptoms','Admin.Action.user').asSequence().last()).lowerCase()"}],"unit": "","index": 0,"referencedEntityType": ""},{"name": "skip","entityType": "Participant","valueType": "text","mimeType": "","isRepeatable": false,"attributes": [{"name": "script","value": "var stage = 'DiseaseSymptoms'\nvar action = $group('Admin.Action.stage',stage,'Admin.Action.actionType').asSequence()\nvar res = $group('Admin.Action.stage',stage,'Admin.Action.eventReason').asSequence().filter(function(v,i){\n  return i == action.indexOf('SKIP')\n  }).last()\nif(res.isNull().not().value()) {\n  res = newValue(res.value().slice(14),'text')  \n}\nres"}],"unit": "","index": 0,"referencedEntityType": ""},{"name": "contraindicated","entityType": "Participant","valueType": "boolean","mimeType": "","isRepeatable": false,"attributes": [{"name": "script","value": "$group('clsa-dcs-f1.Participants:Admin.StageInstance.stage','DiseaseSymptoms',\n'Admin.StageInstance.lastState').any('Contraindicated','NotApplicable')"}],"unit": "","index": 0,"referencedEntityType": ""},{"name": "comment","entityType": "Participant","valueType": "text","mimeType": "","isRepeatable": false,"attributes": [{"name": "script","value": "// this script compounds repeated comments by using lowercase comment strings as array keys\n//\nvar stage = 'DiseaseSymptoms'\nvar c_seq = $group('Admin.Action.stage',stage,'Admin.Action.comment').asSequence()\nvar e_seq = $group('Admin.Action.stage',stage,'Admin.Action.eventReason').asSequence()\nvar res = null\nif(c_seq.size().eq(e_seq.size()).value())\n{\n  var c_str = []  // string array of comments\n  var e_str = []  // string array of event reasons\n\n  for(var i = 0; i < c_seq.size(); i++) {\n    var c = c_seq.valueAt(i).value()\n    if(null == c) continue\n    c = c.replace(/[^a-zA-Z0-9 àâäèéêëîïôœùûüÿçÀÂÄÈÉÊËÎÏÔŒÙÛÜŸÇ]/g,\"\")\n    var e = e_seq.valueAt(i).value()\n    if(0 < c.length) {\n      c_str.push(c)\n      if(null != e && 0 < e.length) {\n        e = e.slice(14)\n      } else {\n        e = 'SeeComment'\n      }\n      e_str.push(e)\n    }\n  }\n\n  if(0 < c_str.length) {\n    var arr = []  // array of event reasons\n    var key_orig = []  // array of lower cased comments as unique keys\n    for(var i = 0; i < c_str.length; i++) {\n      var key = c_str[i]\n      var key_lower = key.toLowerCase()\n      // retain the first encountered instance of the comment\n      //\n      if(undefined === key_orig[key_lower])\n        key_orig[key_lower] = key\n\n      if(undefined === arr[e_str[i]])\n        arr[e_str[i]] = []\n\n      if(-1===arr[e_str[i]].indexOf(key_orig[key_lower]))\n        arr[e_str[i]].push(key_orig[key_lower])\n    }\n\n    // loop over the final array of event reasons and their sets of comments\n    //\n    var str = '{'\n    for(var key in arr) {\n      str += '\"' + key + '\":['\n      var t = []\n      for(var i = 0; i < arr[key].length; i++) {\n        t.push('\"' + arr[key][i] + '\"')\n      }\n      str += t.join(',') + '],'\n    }\n\n    res = newValue(str.substring(0,str.length-1)+'}','text')\n  }\n}\nres"}],"unit": "","index": 0,"referencedEntityType": ""},{"name": "qnaire_complete","entityType": "Participant","valueType": "decimal","mimeType": "","isRepeatable": false,"attributes": [{"name": "script","value": "var stage = 'DiseaseSymptoms'\nvar p = $('clsa-dcs-f1.' + stage + ':QuestionnaireMetric.missingCount').asSequence()\nvar q = $('clsa-dcs-f1.' + stage + ':QuestionnaireMetric.questionCount').asSequence()\nvar res = null\nif(p.isNull().or(q.isNull(),q.sum().eq(0)).not().value()) {\n  res = q.sum().minus(p.sum()).multiply(100).div(q.sum())\n}\nres"}],"unit": "","index": 0,"referencedEntityType": ""},{"name": "missing","entityType": "Participant","valueType": "boolean","mimeType": "","isRepeatable": false,"attributes": [{"name": "script","value": "$this('contraindicated').not().and(\n  $this('skip').isNull(),\n  $this('qnaire_complete').isNull(),\n  $this('duration').isNull())"}],"unit": "","index": 0,"referencedEntityType": ""},{"name": "duration_name","entityType": "Participant","valueType": "text","mimeType": "","isRepeatable": true,"occurrenceGroup": "","attributes": [{"name": "script","value": "\nnewSequence(['CAO','CCC_CANCER','CCC_CARDIAC','CCC_GASTRO','CCC_INFECTION','CCC_MENTAL','CCC_NEURO','CCC_OTHER','CCC_VISION','DEP','DIA','DPR','EPI','HBP','HYP','IHD','OAR','OSA','OSH','OSK','OST','PKD','ROS','STR','TBI'], 'text')\n"}],"unit": "","index": 0,"referencedEntityType": ""},{"name": "duration","entityType": "Participant","valueType": "integer","mimeType": "","isRepeatable": false,"attributes": [{"name": "script","value": "var stage = 'DiseaseSymptoms'\nvar res = null\nvar post = $('clsa-dcs-f1.'+stage+':QuestionnaireRun.timeEnd')\nvar pre = $('clsa-dcs-f1.'+stage+':QuestionnaireRun.timeStart')\nif(pre.before(post).value()) {\n    res = post.time().minus(pre.time()).div(1000)\n}\nif(null === res) {\n  res = $group(\n    'clsa-dcs-f1.Participants:Admin.StageInstance.stage',\n    stage,\n    'Admin.StageInstance.duration').asSequence().sum()\n}\nif(res.eq(0).value()) res = null\nres"}],"unit": "","index": 0,"referencedEntityType": ""},{"name": "duration_value","entityType": "Participant","valueType": "integer","mimeType": "","isRepeatable": true,"occurrenceGroup": "","attributes": [{"name": "script","value": "var res = null\nif($this('duration').isNull().not().value()) {\n  var stage = 'DiseaseSymptoms'\n  var list = $this('duration_name')\n  var str = []\n  var section = $('clsa-dcs-f1.'+stage+':QuestionnaireMetric.section').asSequence()\n  var duration = $('clsa-dcs-f1.'+stage+':QuestionnaireMetric.duration').asSequence()\n  for(var i = 0; i < list.size(); i++) {\n    str.push(\n      duration.filter(\n        function(v, k) {\n          return list.valueAt(i).eq(section.valueAt(k))\n        }\n      ).asSequence().sum()\n    )\n  }\n  res = newSequence(str, 'integer') \n} else {\n  var str = []\n  for(var i = 0; i < $this('duration_name').size(); i++) str.push(null)\n  res = newSequence(str,'integer')\n}\nres"}],"unit": "","index": 0,"referencedEntityType": ""},{"name": "refusal_name","entityType": "Participant","valueType": "text","mimeType": "","isRepeatable": true,"occurrenceGroup": "","attributes": [{"name": "script","value": "\nnewSequence(['CAO','CCC_CANCER','CCC_CARDIAC','CCC_GASTRO','CCC_INFECTION','CCC_MENTAL','CCC_NEURO','CCC_OTHER','CCC_VISION','DEP','DIA','DPR','EPI','HBP','HYP','IHD','OAR','OSA','OSH','OSK','OST','PKD','ROS','STR','TBI'], 'text')\n"}],"unit": "","index": 0,"referencedEntityType": ""},{"name": "refusal_value","entityType": "Participant","valueType": "decimal","mimeType": "","isRepeatable": true,"occurrenceGroup": "","attributes": [{"name": "script","value": "var stage = 'clsa-dcs-f1.DiseaseSymptoms:'\nvar sections = {\n'CAO':[\n'CAO_ASTHMAGE_COF1',\n'CAO_COFAM_COF1',\n'CAO_COFMAM_COF1',\n'CAO_COFPY_COF1',\n'CAO_COLD_COF1',\n'CAO_COPDAGE_COF1',\n'CAO_EXERT_COF1',\n'CAO_MEDNAME_COF1',\n'CAO_MED_10_COF1',\n'CAO_MED_11_COF1',\n'CAO_MED_12_COF1',\n'CAO_MED_13_COF1',\n'CAO_MED_14_COF1',\n'CAO_MED_15_COF1',\n'CAO_MED_16_COF1',\n'CAO_MED_17_COF1',\n'CAO_MED_18_COF1',\n'CAO_MED_19_COF1',\n'CAO_MED_1_COF1',\n'CAO_MED_20_COF1',\n'CAO_MED_21_COF1',\n'CAO_MED_22_COF1',\n'CAO_MED_23_COF1',\n'CAO_MED_24_COF1',\n'CAO_MED_25_COF1',\n'CAO_MED_26_COF1',\n'CAO_MED_27_COF1',\n'CAO_MED_28_COF1',\n'CAO_MED_29_COF1',\n'CAO_MED_2_COF1',\n'CAO_MED_30_COF1',\n'CAO_MED_31_COF1',\n'CAO_MED_32_COF1',\n'CAO_MED_33_COF1',\n'CAO_MED_34_COF1',\n'CAO_MED_35_COF1',\n'CAO_MED_36_COF1',\n'CAO_MED_37_COF1',\n'CAO_MED_38_COF1',\n'CAO_MED_39_COF1',\n'CAO_MED_3_COF1',\n'CAO_MED_40_COF1',\n'CAO_MED_4_COF1',\n'CAO_MED_5_COF1',\n'CAO_MED_6_COF1',\n'CAO_MED_7_COF1',\n'CAO_MED_8_COF1',\n'CAO_MED_9_COF1',\n'CAO_MED_COF1',\n'CAO_PHLEGMPY_COF1',\n'CAO_SOBFLAT_COF1',\n'CAO_SOBPM_COF1',\n'CAO_SOBUP_COF1',\n'CAO_WHEZ_COF1',\n'CAO_WKCOF_COF1',\n'CAO_WKSOB_COF1',\n'CAO_WKWHEZ_COF1',\n'CCC_ASTHM_CHANGE_COF1',\n'CCC_ASTHM_COF1',\n'CCC_COPD_CHANGE_COF1',\n'CCC_COPD_COF1'],\n'CCC_CANCER':[\n'CCC_CANC_COF1',\n'CCC_CANCAGE_COF1',\n'CCC_CANC_CHANGE_COF1',\n'CCC_CANTP_COF1'],\n'CCC_CARDIAC':[\n'CCC_HEART_COF1',\n'CCC_HEARTAGE_COF1',\n'CCC_HEARTCHANGE_COF1',\n'CCC_PVD_COF1',\n'CCC_PVDAGE_COF1',\n'CCC_PVD_CHANGE_COF1'],\n'CCC_GASTRO':[\n'CCC_ULCR_COF1',\n'CCC_ULCRAGE_COF1',\n'CCC_ULCR_CHANGE_COF1',\n'CCC_IBDIBS_COF1',\n'CCC_IBDIBSAGE_COF1',\n'CCC_IBDIBS_CHANGE_COF1',\n'CCC_BOWINC_COF1',\n'CCC_BOWINCAGE_COF1',\n'CCC_URIINC_COF1',\n'CCC_URIINCAGE_COF1'],\n'CCC_INFECTION':[\n'CCC_DRPNEU_COF1',\n'CCC_DRFLU_COF1',\n'CCC_DRUTI_COF1',\n'CCC_DROT_COF1',\n'CCC_DROTSP_COF1'],\n'CCC_MENTAL':[\n'CCC_ANXI_COF1',\n'CCC_ANXIAGE_COF1',\n'CCC_ANXI_CHANGE_COF1',\n'CCC_MOOD_COF1',\n'CCC_MOODAGE_COF1',\n'CCC_MOOD_CHANGE_COF1'],\n'CCC_NEURO':[\n'CCC_ALZHAGE_COF1',\n'CCC_ALZH_CHANGE_COF1',\n'CCC_ALZH_COF1',\n'CCC_EPILAGE_COF1',\n'CCC_EPIL_CHANGE_COF1',\n'CCC_EPIL_COF1',\n'CCC_MEMPBAGE_COF1',\n'CCC_MEMPB_CHANGE_COF1',\n'CCC_MEMPB_COF1',\n'CCC_MGRNAGE_COF1',\n'CCC_MGRN_CHANGE_COF1',\n'CCC_MGRN_COF1',\n'CCC_MSAGE_COF1',\n'CCC_MS_CHANGE_COF1',\n'CCC_MS_COF1'],\n'CCC_OTHER':[\n'CCC_ALLRGAGE_COF1',\n'CCC_ALLRG_CHANGE_COF1',\n'CCC_ALLRG_COF1',\n'CCC_BCKPAGE_COF1',\n'CCC_BCKP_CHANGE_COF1',\n'CCC_BCKP_COF1',\n'CCC_DITYP_COF1',\n'CCC_HCVAGE_COF1',\n'CCC_HCV_COF1',\n'CCC_HCV_CURR_COF1',\n'CCC_HCV_TRT_COF1',\n'CCC_HCV_TXS_COF1',\n'CCC_KIDNAGE_COF1',\n'CCC_KIDN_CHANGE_COF1',\n'CCC_KIDN_COF1',\n'CCC_OTCCC_COF1'],\n'CCC_VISION':[\n'CCC_MACDEG_COF1',\n'CCC_MACDEGAGE_COF1',\n'CCC_MACDEG_CHANGE_COF1'],\n'DEP':[\n'DEP_BOTR_COF1',\n'DEP_FFRT_COF1',\n'DEP_FLDP_COF1',\n'DEP_FRFL_COF1',\n'DEP_GTGO_COF1',\n'DEP_HAPP_COF1',\n'DEP_HPFL_COF1',\n'DEP_LONLY_COF1',\n'DEP_MIND_COF1',\n'DEP_RSTLS_COF1'],\n'DIA':[\n'DIA_AGE_COF1',\n'DIA_DIABRTAGE_COF1',\n'DIA_DIABRT_COF1',\n'DIA_DIAB_CHANGE_COF1',\n'DIA_DIAB_COF1',\n'DIA_EVPRG_COF1',\n'DIA_MEDAGE_COF1',\n'DIA_MEDINSNAME_COF1',\n'DIA_MEDNAME_COF1',\n'DIA_MED_10_COF1',\n'DIA_MED_11_COF1',\n'DIA_MED_12_COF1',\n'DIA_MED_13_COF1',\n'DIA_MED_14_COF1',\n'DIA_MED_15_COF1',\n'DIA_MED_16_COF1',\n'DIA_MED_17_COF1',\n'DIA_MED_18_COF1',\n'DIA_MED_19_COF1',\n'DIA_MED_1_COF1',\n'DIA_MED_20_COF1',\n'DIA_MED_21_COF1',\n'DIA_MED_22_COF1',\n'DIA_MED_23_COF1',\n'DIA_MED_24_COF1',\n'DIA_MED_25_COF1',\n'DIA_MED_26_COF1',\n'DIA_MED_27_COF1',\n'DIA_MED_28_COF1',\n'DIA_MED_29_COF1',\n'DIA_MED_2_COF1',\n'DIA_MED_30_COF1',\n'DIA_MED_31_COF1',\n'DIA_MED_32_COF1',\n'DIA_MED_33_COF1',\n'DIA_MED_34_COF1',\n'DIA_MED_35_COF1',\n'DIA_MED_36_COF1',\n'DIA_MED_37_COF1',\n'DIA_MED_38_COF1',\n'DIA_MED_39_COF1',\n'DIA_MED_3_COF1',\n'DIA_MED_40_COF1',\n'DIA_MED_4_COF1',\n'DIA_MED_5_COF1',\n'DIA_MED_6_COF1',\n'DIA_MED_7_COF1',\n'DIA_MED_8_COF1',\n'DIA_MED_9_COF1',\n'DIA_MED_COF1',\n'DIA_PRGDIA_COF1',\n'DIA_TYPE_COF1'],\n'DPR':[\n'DPR_AGE_COF1',\n'DPR_CLINDEP_CHANGE_COF1',\n'DPR_CLINDEP_COF1',\n'DPR_EVRMED_COF1',\n'DPR_MEDNAME_COF1',\n'DPR_MED_10_COF1',\n'DPR_MED_11_COF1',\n'DPR_MED_12_COF1',\n'DPR_MED_13_COF1',\n'DPR_MED_14_COF1',\n'DPR_MED_15_COF1',\n'DPR_MED_16_COF1',\n'DPR_MED_17_COF1',\n'DPR_MED_18_COF1',\n'DPR_MED_19_COF1',\n'DPR_MED_1_COF1',\n'DPR_MED_20_COF1',\n'DPR_MED_21_COF1',\n'DPR_MED_22_COF1',\n'DPR_MED_23_COF1',\n'DPR_MED_24_COF1',\n'DPR_MED_25_COF1',\n'DPR_MED_26_COF1',\n'DPR_MED_27_COF1',\n'DPR_MED_28_COF1',\n'DPR_MED_29_COF1',\n'DPR_MED_2_COF1',\n'DPR_MED_30_COF1',\n'DPR_MED_31_COF1',\n'DPR_MED_32_COF1',\n'DPR_MED_33_COF1',\n'DPR_MED_34_COF1',\n'DPR_MED_35_COF1',\n'DPR_MED_36_COF1',\n'DPR_MED_37_COF1',\n'DPR_MED_38_COF1',\n'DPR_MED_39_COF1',\n'DPR_MED_3_COF1',\n'DPR_MED_40_COF1',\n'DPR_MED_4_COF1',\n'DPR_MED_5_COF1',\n'DPR_MED_6_COF1',\n'DPR_MED_7_COF1',\n'DPR_MED_8_COF1',\n'DPR_MED_9_COF1',\n'DPR_MED_COF1',\n'DPR_OTHMD_COF1'],\n'EPI':[\n'EPI_CAUS_BDMV_COF1',\n'EPI_CAUS_DREM_COF1',\n'EPI_CAUS_FEV_COF1',\n'EPI_CAUS_JERK_COF1',\n'EPI_CAUS_MENT_COF1',\n'EPI_CAUS_SEIZ_COF1',\n'EPI_CAUS_SPEL_COF1',\n'EPI_CAUS_TWIT_COF1',\n'EPI_CURRMED_COF1',\n'EPI_EPILSZ_COF1',\n'EPI_EVER_COF1',\n'EPI_MED_COF1'],\n'HBP':[\n'CCC_HBP_CHANGE_COF1',\n'CCC_HBP_COF1',\n'HBP_AGE_COF1',\n'HBP_EVRMED_COF1',\n'HBP_EVTRT_COF1',\n'HBP_MEDNAME_COF1',\n'HBP_MED_10_COF1',\n'HBP_MED_11_COF1',\n'HBP_MED_12_COF1',\n'HBP_MED_13_COF1',\n'HBP_MED_14_COF1',\n'HBP_MED_15_COF1',\n'HBP_MED_16_COF1',\n'HBP_MED_17_COF1',\n'HBP_MED_18_COF1',\n'HBP_MED_19_COF1',\n'HBP_MED_1_COF1',\n'HBP_MED_20_COF1',\n'HBP_MED_21_COF1',\n'HBP_MED_22_COF1',\n'HBP_MED_23_COF1',\n'HBP_MED_24_COF1',\n'HBP_MED_25_COF1',\n'HBP_MED_26_COF1',\n'HBP_MED_27_COF1',\n'HBP_MED_28_COF1',\n'HBP_MED_29_COF1',\n'HBP_MED_2_COF1',\n'HBP_MED_30_COF1',\n'HBP_MED_31_COF1',\n'HBP_MED_32_COF1',\n'HBP_MED_33_COF1',\n'HBP_MED_34_COF1',\n'HBP_MED_35_COF1',\n'HBP_MED_36_COF1',\n'HBP_MED_37_COF1',\n'HBP_MED_38_COF1'],\n'HYP':[\n'CCC_OTHYR_CHANGE_COF1',\n'CCC_OTHYR_COF1',\n'CCC_UTHYR_CHANGE_COF1',\n'CCC_UTHYR_COF1',\n'HYP_OTHYRAGE_COF1',\n'HYP_OTHYREVRMD_COF1',\n'HYP_OTHYRMEDNAME_COF1',\n'HYP_OTHYRMED_10_COF1',\n'HYP_OTHYRMED_11_COF1',\n'HYP_OTHYRMED_12_COF1',\n'HYP_OTHYRMED_13_COF1',\n'HYP_OTHYRMED_14_COF1',\n'HYP_OTHYRMED_15_COF1',\n'HYP_OTHYRMED_16_COF1',\n'HYP_OTHYRMED_17_COF1',\n'HYP_OTHYRMED_18_COF1',\n'HYP_OTHYRMED_19_COF1',\n'HYP_OTHYRMED_1_COF1',\n'HYP_OTHYRMED_20_COF1',\n'HYP_OTHYRMED_21_COF1',\n'HYP_OTHYRMED_22_COF1',\n'HYP_OTHYRMED_23_COF1',\n'HYP_OTHYRMED_24_COF1',\n'HYP_OTHYRMED_25_COF1',\n'HYP_OTHYRMED_26_COF1',\n'HYP_OTHYRMED_27_COF1',\n'HYP_OTHYRMED_28_COF1',\n'HYP_OTHYRMED_29_COF1',\n'HYP_OTHYRMED_2_COF1',\n'HYP_OTHYRMED_30_COF1',\n'HYP_OTHYRMED_31_COF1',\n'HYP_OTHYRMED_32_COF1',\n'HYP_OTHYRMED_33_COF1',\n'HYP_OTHYRMED_34_COF1',\n'HYP_OTHYRMED_35_COF1',\n'HYP_OTHYRMED_36_COF1',\n'HYP_OTHYRMED_37_COF1',\n'HYP_OTHYRMED_38_COF1',\n'HYP_OTHYRMED_39_COF1',\n'HYP_OTHYRMED_3_COF1',\n'HYP_OTHYRMED_40_COF1',\n'HYP_OTHYRMED_4_COF1',\n'HYP_OTHYRMED_5_COF1',\n'HYP_OTHYRMED_6_COF1',\n'HYP_OTHYRMED_7_COF1',\n'HYP_OTHYRMED_8_COF1',\n'HYP_OTHYRMED_9_COF1',\n'HYP_OTHYRMED_COF1',\n'HYP_UTHYRAGE_COF1',\n'HYP_UTHYREVRMED_COF1',\n'HYP_UTHYRMEDNAME_COF1',\n'HYP_UTHYRMED_10_COF1',\n'HYP_UTHYRMED_11_COF1',\n'HYP_UTHYRMED_12_COF1',\n'HYP_UTHYRMED_13_COF1',\n'HYP_UTHYRMED_14_COF1',\n'HYP_UTHYRMED_15_COF1',\n'HYP_UTHYRMED_16_COF1',\n'HYP_UTHYRMED_17_COF1',\n'HYP_UTHYRMED_18_COF1',\n'HYP_UTHYRMED_19_COF1',\n'HYP_UTHYRMED_1_COF1',\n'HYP_UTHYRMED_20_COF1',\n'HYP_UTHYRMED_21_COF1',\n'HYP_UTHYRMED_22_COF1',\n'HYP_UTHYRMED_23_COF1',\n'HYP_UTHYRMED_24_COF1',\n'HYP_UTHYRMED_25_COF1',\n'HYP_UTHYRMED_26_COF1',\n'HYP_UTHYRMED_27_COF1',\n'HYP_UTHYRMED_28_COF1',\n'HYP_UTHYRMED_29_COF1',\n'HYP_UTHYRMED_2_COF1',\n'HYP_UTHYRMED_30_COF1',\n'HYP_UTHYRMED_31_COF1',\n'HYP_UTHYRMED_32_COF1',\n'HYP_UTHYRMED_33_COF1',\n'HYP_UTHYRMED_34_COF1',\n'HYP_UTHYRMED_35_COF1',\n'HYP_UTHYRMED_36_COF1',\n'HYP_UTHYRMED_37_COF1',\n'HYP_UTHYRMED_38_COF1',\n'HYP_UTHYRMED_39_COF1',\n'HYP_UTHYRMED_3_COF1',\n'HYP_UTHYRMED_40_COF1',\n'HYP_UTHYRMED_4_COF1',\n'HYP_UTHYRMED_5_COF1',\n'HYP_UTHYRMED_6_COF1',\n'HYP_UTHYRMED_7_COF1',\n'HYP_UTHYRMED_8_COF1',\n'HYP_UTHYRMED_9_COF1',\n'HYP_UTHYRMED_COF1'],\n'IHD':[\n'CCC_AMI_CHANGE_COF1',\n'CCC_AMI_COF1',\n'CCC_ANGI_CHANGE_COF1',\n'CCC_ANGI_COF1',\n'IHD_AMIAGE_COF1',\n'IHD_ANGIAGE_COF1',\n'IHD_ANGIO_COF1',\n'IHD_BLOCK_CHANGE_COF1',\n'IHD_BLOCK_COF1',\n'IHD_CAB_COF1',\n'IHD_EVRMED_COF1',\n'IHD_MEDNAME_COF1',\n'IHD_MED_10_COF1',\n'IHD_MED_11_COF1',\n'IHD_MED_12_COF1',\n'IHD_MED_13_COF1',\n'IHD_MED_14_COF1',\n'IHD_MED_15_COF1',\n'IHD_MED_16_COF1',\n'IHD_MED_17_COF1',\n'IHD_MED_18_COF1',\n'IHD_MED_19_COF1',\n'IHD_MED_1_COF1',\n'IHD_MED_20_COF1',\n'IHD_MED_21_COF1',\n'IHD_MED_22_COF1',\n'IHD_MED_23_COF1',\n'IHD_MED_24_COF1',\n'IHD_MED_25_COF1',\n'IHD_MED_26_COF1',\n'IHD_MED_27_COF1',\n'IHD_MED_28_COF1',\n'IHD_MED_29_COF1',\n'IHD_MED_2_COF1',\n'IHD_MED_30_COF1',\n'IHD_MED_31_COF1',\n'IHD_MED_32_COF1',\n'IHD_MED_33_COF1',\n'IHD_MED_34_COF1',\n'IHD_MED_35_COF1',\n'IHD_MED_36_COF1',\n'IHD_MED_37_COF1',\n'IHD_MED_38_COF1',\n'IHD_MED_39_COF1',\n'IHD_MED_3_COF1',\n'IHD_MED_40_COF1',\n'IHD_MED_4_COF1',\n'IHD_MED_5_COF1',\n'IHD_MED_6_COF1',\n'IHD_MED_7_COF1',\n'IHD_MED_8_COF1',\n'IHD_MED_9_COF1',\n'IHD_MED_COF1'],\n'OAR':[\n'CCC_RA_COF1',\n'CCC_RA_CHANGE_COF1',\n'CCC_ARTOT_COF1',\n'CCC_ARTOT_CHANGE_COF1',\n'OAR_AGE_COF1',\n'OAR_MED_COF1',\n'OAR_MEDOT_COF1'],\n'OSA':[\n'CCC_OAHAND_COF1',\n'CCC_OAHAND_CHANGE_COF1',\n'OSA_AGE_COF1',\n'OSA_LGJNT_COF1',\n'OSA_NBFNG_COF1',\n'OSA_PAINJNT_COF1',\n'OSA_LGTMB_COF1',\n'OSA_PAINTMB_COF1'],\n'OSH':[\n'CCC_OAHIP_COF1',\n'CCC_OAHIP_CHANGE_COF1',\n'OSH_AGE_COF1',\n'OSH_HIPRPL_COF1',\n'OSH_FRAC_COF1',\n'OSH_PAIN_COF1',\n'OSH_PAINSL_COF1',\n'OSH_LOM_COF1'],\n'OSK':[\n'CCC_OAKNEE_COF1',\n'CCC_OAKNEE_CHANGE_COF1',\n'OSK_AGE_COF1',\n'OSK_KNERPL_COF1',\n'OSK_PAIN_COF1',\n'OSK_PAINSL_COF1',\n'OSK_SWELL_COF1'],\n'OST':[\n'CCC_OSTPO_CHANGE_COF1',\n'CCC_OSTPO_COF1',\n'OST_AGE_COF1',\n'OST_BCKPLOC_COF1',\n'OST_BCKPPM_COF1',\n'OST_BONE_COF1',\n'OST_BP_COF1',\n'OST_BP_DUR_COF1',\n'OST_CSTAGE_COF1',\n'OST_CST_COF1',\n'OST_CST_MT_COF1',\n'OST_DAD_COF1',\n'OST_EVRMD_COF1',\n'OST_FRAC_COF1',\n'OST_HGT_COF1',\n'OST_MEDNAME_COF1',\n'OST_MED_10_COF1',\n'OST_MED_11_COF1',\n'OST_MED_12_COF1',\n'OST_MED_13_COF1',\n'OST_MED_14_COF1',\n'OST_MED_15_COF1',\n'OST_MED_16_COF1',\n'OST_MED_17_COF1',\n'OST_MED_18_COF1',\n'OST_MED_19_COF1',\n'OST_MED_1_COF1',\n'OST_MED_20_COF1',\n'OST_MED_21_COF1',\n'OST_MED_22_COF1',\n'OST_MED_23_COF1',\n'OST_MED_24_COF1',\n'OST_MED_25_COF1',\n'OST_MED_26_COF1',\n'OST_MED_27_COF1',\n'OST_MED_28_COF1',\n'OST_MED_29_COF1',\n'OST_MED_2_COF1',\n'OST_MED_30_COF1',\n'OST_MED_31_COF1',\n'OST_MED_32_COF1',\n'OST_MED_33_COF1',\n'OST_MED_34_COF1',\n'OST_MED_35_COF1',\n'OST_MED_36_COF1',\n'OST_MED_37_COF1',\n'OST_MED_38_COF1',\n'OST_MED_39_COF1',\n'OST_MED_3_COF1',\n'OST_MED_40_COF1',\n'OST_MED_4_COF1',\n'OST_MED_5_COF1',\n'OST_MED_6_COF1',\n'OST_MED_7_COF1',\n'OST_MED_8_COF1',\n'OST_MED_9_COF1',\n'OST_MED_COF1',\n'OST_MOM_COF1'],\n'PKD':[\n'CCC_PARK_CHANGE_COF1',\n'CCC_PARK_COF1',\n'PKD_AGE_COF1',\n'PKD_BAL_COF1',\n'PKD_BUTON_COF1',\n'PKD_EVRMED_COF1',\n'PKD_FACE_COF1',\n'PKD_FEET_COF1',\n'PKD_MEDNAME_COF1',\n'PKD_MED_10_COF1',\n'PKD_MED_11_COF1',\n'PKD_MED_12_COF1',\n'PKD_MED_13_COF1',\n'PKD_MED_14_COF1',\n'PKD_MED_15_COF1',\n'PKD_MED_16_COF1',\n'PKD_MED_17_COF1',\n'PKD_MED_18_COF1',\n'PKD_MED_19_COF1',\n'PKD_MED_1_COF1',\n'PKD_MED_20_COF1',\n'PKD_MED_21_COF1',\n'PKD_MED_22_COF1',\n'PKD_MED_23_COF1',\n'PKD_MED_24_COF1',\n'PKD_MED_25_COF1',\n'PKD_MED_26_COF1',\n'PKD_MED_27_COF1',\n'PKD_MED_28_COF1',\n'PKD_MED_29_COF1',\n'PKD_MED_2_COF1',\n'PKD_MED_30_COF1',\n'PKD_MED_31_COF1',\n'PKD_MED_32_COF1',\n'PKD_MED_33_COF1',\n'PKD_MED_34_COF1',\n'PKD_MED_35_COF1',\n'PKD_MED_36_COF1',\n'PKD_MED_37_COF1',\n'PKD_MED_38_COF1',\n'PKD_MED_39_COF1',\n'PKD_MED_3_COF1',\n'PKD_MED_40_COF1',\n'PKD_MED_4_COF1',\n'PKD_MED_5_COF1',\n'PKD_MED_6_COF1',\n'PKD_MED_7_COF1',\n'PKD_MED_8_COF1',\n'PKD_MED_9_COF1',\n'PKD_MED_COF1',\n'PKD_OTHMD_COF1',\n'PKD_RISE_COF1',\n'PKD_SHKE_COF1',\n'PKD_SHKSEV_COF1',\n'PKD_SMWRT_COF1',\n'PKD_VOICE_COF1',\n'PKD_WALK_COF1'],\n'ROS':[\n'ROS_PAIN_COF1',\n'ROS_HILL_COF1',\n'ROS_LEVEL_COF1',\n'ROS_BLOCK_COF1',\n'ROS_DOWLK_COF1',\n'ROS_STILL_COF1',\n'ROS_SOON_COF1',\n'ROS_LOC_COF1',\n'ROS_SEVPAIN_COF1'],\n'STR':[\n'CCC_CVAFX_COF1',\n'CCC_CVA_CHANGE_COF1',\n'CCC_CVA_COF1',\n'CCC_TIA_CHANGE_COF1',\n'CCC_TIA_COF1',\n'STR_CVAAGE_COF1',\n'STR_EVRMD_COF1',\n'STR_MEDNAME_COF1',\n'STR_MED_10_COF1',\n'STR_MED_11_COF1',\n'STR_MED_12_COF1',\n'STR_MED_13_COF1',\n'STR_MED_14_COF1',\n'STR_MED_15_COF1',\n'STR_MED_16_COF1',\n'STR_MED_17_COF1',\n'STR_MED_18_COF1',\n'STR_MED_19_COF1',\n'STR_MED_1_COF1',\n'STR_MED_20_COF1',\n'STR_MED_21_COF1',\n'STR_MED_22_COF1',\n'STR_MED_23_COF1',\n'STR_MED_24_COF1',\n'STR_MED_25_COF1',\n'STR_MED_26_COF1',\n'STR_MED_27_COF1',\n'STR_MED_28_COF1',\n'STR_MED_29_COF1',\n'STR_MED_2_COF1',\n'STR_MED_30_COF1',\n'STR_MED_31_COF1',\n'STR_MED_32_COF1',\n'STR_MED_33_COF1',\n'STR_MED_34_COF1',\n'STR_MED_35_COF1',\n'STR_MED_36_COF1',\n'STR_MED_37_COF1',\n'STR_MED_38_COF1',\n'STR_MED_39_COF1',\n'STR_MED_3_COF1',\n'STR_MED_40_COF1',\n'STR_MED_4_COF1',\n'STR_MED_5_COF1',\n'STR_MED_6_COF1',\n'STR_MED_7_COF1',\n'STR_MED_8_COF1',\n'STR_MED_9_COF1',\n'STR_MED_COF1',\n'STR_NOEXP_COF1',\n'STR_NOEXP_DUR_COF1',\n'STR_NOUND_COF1',\n'STR_NOUND_DUR_COF1',\n'STR_NOVIS_COF1',\n'STR_NOVIS_DUR_COF1',\n'STR_NUMB_COF1',\n'STR_NUMB_DUR_COF1',\n'STR_OTHMD_COF1',\n'STR_TIAAGE_COF1',\n'STR_TIAEVMD_COF1',\n'STR_TIAMEDNAME_COF1',\n'STR_TIAMED_10_COF1',\n'STR_TIAMED_11_COF1',\n'STR_TIAMED_12_COF1',\n'STR_TIAMED_13_COF1',\n'STR_TIAMED_14_COF1',\n'STR_TIAMED_15_COF1',\n'STR_TIAMED_16_COF1',\n'STR_TIAMED_17_COF1',\n'STR_TIAMED_18_COF1',\n'STR_TIAMED_19_COF1',\n'STR_TIAMED_1_COF1',\n'STR_TIAMED_20_COF1',\n'STR_TIAMED_21_COF1',\n'STR_TIAMED_22_COF1',\n'STR_TIAMED_23_COF1',\n'STR_TIAMED_24_COF1',\n'STR_TIAMED_25_COF1',\n'STR_TIAMED_26_COF1',\n'STR_TIAMED_27_COF1',\n'STR_TIAMED_28_COF1',\n'STR_TIAMED_29_COF1',\n'STR_TIAMED_2_COF1',\n'STR_TIAMED_30_COF1',\n'STR_TIAMED_31_COF1',\n'STR_TIAMED_32_COF1',\n'STR_TIAMED_33_COF1',\n'STR_TIAMED_34_COF1',\n'STR_TIAMED_35_COF1',\n'STR_TIAMED_36_COF1',\n'STR_TIAMED_37_COF1',\n'STR_TIAMED_38_COF1',\n'STR_TIAMED_39_COF1',\n'STR_TIAMED_3_COF1',\n'STR_TIAMED_40_COF1',\n'STR_TIAMED_4_COF1',\n'STR_TIAMED_5_COF1',\n'STR_TIAMED_6_COF1',\n'STR_TIAMED_7_COF1',\n'STR_TIAMED_8_COF1',\n'STR_TIAMED_9_COF1',\n'STR_TIAMED_COF1',\n'STR_TIAOTHMD_COF1',\n'STR_VIS_COF1',\n'STR_VIS_DUR_COF1',\n'STR_WEAK_COF1',\n'STR_WEAK_DUR_COF1'],\n'TBI':[\n'TBI_TYP_COF1',\n'TBI_NMBR_COF1',\n'TBI_RSLT_COF1',\n'TBI_MCR_COF1',\n'TBI_PROB_COF1']\n}\n\nvar str = []\nfor(var key in sections) {\n  var rcount = 0\n  var qcount = 0\n  var arr = sections[key]\n  for(var i = 0; i < arr.length; i++) {\n    var j = $(stage + arr[i])\n    if(j.isNull().value()) {\n      continue\n    }  \n    qcount++\n    rcount += j.any('REFUSED').value() ? 1 : 0\n  }\n  if(0 == qcount) {\n    str.push(null)\n  } else {\n    str.push(100.0*rcount/qcount)\n  }\n}\nnewSequence(str, 'decimal')"}],"unit": "","index": 0,"referencedEntityType": ""}]}}