{"from": ["clsa-inhome-f3.Participants"],"name": "QC_F3_json","datasourceName": "cosmos_inhome","Magma.VariableListViewDto.view": {"variables": [{"name": "data","entityType": "Participant","valueType": "text","mimeType": "","isRepeatable": false,"attributes": [{"name": "script","value": "var prj = 'cosmos_inhome.QC_F3_'\nvar qnaire_arr = ['technician','contraindicated','comment','duration','missing','qnaire_complete','skip','module_duration']\nvar view_list = {\n  'interview':\n    ['barcode','start_date','site','duration','stage_duration','type'],\n  'inhome_1':qnaire_arr,\n  'inhome_2':qnaire_arr,\n  'inhome_3':qnaire_arr,\n  'inhome_4':qnaire_arr,\n  'inhome_cognition_recording':\n    ['technician','contraindicated','comment','duration','missing','qnaire_complete','skip','file_complete','file_size']  \n}\n\nvar inter_str = null\nvar stage_str = []\nfor( var key in view_list ) {  \n  var var_str = prj + key + ':'\n  var var_arr = view_list[key]  \n  key_str = []\n  for(var i=0;i<var_arr.length;i++) {\n    var var_i = var_arr[i]\n    var v = $(var_str + var_i)\n    if(v.isNull().value()) continue;    \n    if('module_duration'==var_i || 'file_size'==var_i) {  \n      key_str.push('\"' + var_i + '\":' + v.value())\n    } else {\n      if(v.type().eq('text').and('comment'!=var_i).value()) {\n        key_str.push('\"' + var_i + '\":\"' + v.value() + '\"')\n      } else {\n        key_str.push('\"' + var_i + '\":' + v.value())\n      }  \n    }\n  }\n  if('interview'==key) {\n    inter_str = '{' + key_str.join(',') + ',\"stages\":{'\n  } else {\n    stage_str.push( '\"' + key + '\":{' + key_str.join(',') + '}')\n  }    \n}\n\nnewValue( inter_str + stage_str.join(',') +'}}','text')"}],"unit": "","index": 0,"referencedEntityType": ""}]}}